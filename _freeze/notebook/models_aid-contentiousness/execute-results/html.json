{
  "hash": "2165bf74ca279c3eef15ac03ac28db0c",
  "result": {
    "markdown": "---\ntitle: \"H~2~: Effect of anti-NGO crackdown on aid contentiousness\"\nformat:\n  html:\n    code-fold: true\n    toc-depth: 5\n    knitr:\n      opts_chunk:\n        out.width: \"80%\"\neditor_options: \n  chunk_output_type: inline\n---\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(targets)\nlibrary(brms)\nlibrary(tidybayes)\nlibrary(broom)\nlibrary(broom.mixed)\nlibrary(modelsummary)\nlibrary(marginaleffects)\nlibrary(patchwork)\nlibrary(scales)\nlibrary(ggdist)\nlibrary(ggtext)\nlibrary(ggh4x)\nlibrary(extraDistr)\nlibrary(kableExtra)\nlibrary(glue)\nlibrary(here)\n\ntar_config_set(store = here::here('_targets'),\n               script = here::here('_targets.R'))\n\nset.seed(1234)\n\n# Load stuff from targets\n# Plotting functions\ninvisible(list2env(tar_read(graphic_functions), .GlobalEnv))\ninvisible(list2env(tar_read(tbl_functions), .GlobalEnv))\nset_annotation_fonts()\n\n# Tell bayesplot to use the sunset palette for things like pp_check()\nbayesplot::color_scheme_set(clrs$Sunset[2:7])\n\n# Data\ndf_country_aid <- tar_read(country_aid_final)\ndf_country_aid_laws <- filter(df_country_aid, laws)\n\n# Treatment models\ntar_load(c(m_purpose_treatment_total, m_purpose_treatment_advocacy, \n           m_purpose_treatment_entry, m_purpose_treatment_funding, \n           m_purpose_treatment_ccsi, m_purpose_treatment_repress))\n\n# IPTW data\ntar_load(c(df_purpose_iptw_total, df_purpose_iptw_advocacy, \n           df_purpose_iptw_entry, df_purpose_iptw_funding,\n           df_purpose_iptw_ccsi, df_purpose_iptw_repress))\n\n# Outcome models\ntar_load(c(m_purpose_outcome_total, m_purpose_outcome_advocacy, \n           m_purpose_outcome_entry, m_purpose_outcome_funding,\n           m_purpose_outcome_ccsi, m_purpose_outcome_repress))\n\n# Marginal/conditional effects\ntar_load(c(mfx_purpose_cfx_multiple, mfx_purpose_cfx_single))\n\n# Results tables\ntar_load(c(models_tbl_h2_treatment_num, models_tbl_h2_treatment_denom))\ntar_load(c(models_tbl_h2_outcome_dejure, models_tbl_h2_outcome_defacto))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ninvisible(list2env(tar_read(modelsummary_functions), .GlobalEnv))\n\ntreatment_names <- c(\"Treatment\", \"Total barriers (t)\", \"Barriers to advocacy (t)\", \n                     \"Barriers to entry (t)\", \"Barriers to funding (t)\", \"CCSI (t)\",\n                     \"CS repression (t)\")\ntreatment_rows <- as.data.frame(t(treatment_names))\nattr(treatment_rows, \"position\") <- 1\n\noutcome_names <- c(\"Treatment\", \"Total barriers (t)\", \"Barriers to advocacy (t)\", \n                   \"Barriers to entry (t)\", \"Barriers to funding (t)\")\noutcome_rows <- as.data.frame(t(outcome_names))\nattr(outcome_rows, \"position\") <- 1\n```\n:::\n\n\n# Weight models\n\n## General idea\n\nSee the [\"Weight models—General idea\" section from the total aid page](models_total-aid.qmd#general-idea) for an explanation of the intuition behind how to create these stabilized weights.\n\n## Actual models\n\nWe identify our time-varying and time-invariant confounders based on [our causal model and *do*-calculus logic](causal-model.qmd#final-variables-to-use), and we deal with the panel structure of the data by including random intercepts for country, and both a population-level trend and random slopes for year. We use [generic weakly informative priors](https://mc-stan.org/users/documentation/case-studies/weakly_informative_shapes.html) for our model parameters.\n\n### Numerator\n\nOur numerator models look like this (but with the actual treatment variable replacing `treatment`, like `barriers_total`, `advocacy`, and so on):\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nbf(treatment ~ treatment_lag1 + treatment_lag2_cumsum + (1 | gwcode))\n```\n:::\n\n\nOr more formally:\n\n$$\n\\begin{aligned}\n\\text{Treatment}_{it_j} &\\sim \\mathcal{N}(\\mu_{it_j}, \\sigma_y) \\\\\n\\mu_{it_j} &= (\\beta_0 + b_{0_j}) + \\beta_1 \\text{Treatment}_{i, t-1_j} + \\textstyle{\\sum_{\\tau = (t-2)}^{t}} \\text{Treatment}_{i\\tau} \\\\\nb_{0_j} &\\sim \\mathcal{N}(0, \\sigma_0) \\\\\n\\\\\n\\beta_0, \\beta_1 &\\sim \\operatorname{Student~\\textit{t}\\,}(\\nu = 3, \\mu = 0, \\sigma = 1.5) \\\\\n\\sigma_y, \\sigma_0 &\\sim \\operatorname{Exponential}(1)\n\\end{aligned}\n$$\n\n### Denominator\n\nOur denominator models look like this (but again with the actual treatment variable replacing `treatment`):\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nbf(treatment ~ treatment_lag1 + treatment_lag2_cumsum + \n     # Lagged outcome\n     prop_contentious_lag1 +\n     # Human rights and politics\n     v2x_polyarchy + v2x_corr + v2x_rule + v2x_civlib + v2x_clphy + v2x_clpriv +\n     # Economics and development\n     gdpcap_log_z + un_trade_pct_gdp + v2peedueq + v2pehealth + e_peinfmor +\n     # Conflict and disasters\n     internal_conflict_past_5 + natural_dis_count +\n     # Time and country effects\n     year_c + (1 + year_c | gwcode))\n```\n:::\n\n\nOr more formally:\n\n$$\n\\begin{aligned}\n\\text{Treatment}_{it_j} \\sim&\\ \\mathcal{N}(\\mu_{it_j}, \\sigma_y) \\\\\n\\mu_{it_j} =&\\ (\\beta_0 + b_{0_j}) + \\beta_1\\, \\text{Treatment}_{i, t-1_j} + \\beta_2\\, \\textstyle{\\sum_{\\tau = (t-2)}^{t}} \\text{Treatment}_{i\\tau} + \\\\\n&\\ \\beta_3\\, \\text{Proportion of contentious aid}_{i,t-1_j} + \\beta_{4 \\ldots 9}\\, \\text{Human rights \\& politics}_{it_j} + \\\\\n&\\ \\beta_{10 \\ldots 14}\\, \\text{Economics \\& development} + \\beta_{15, 16}\\, \\text{Conflict \\& disasters}_{it_j} + \\\\\n&\\ (\\beta_{17} + b_{17_j})\\, \\text{Year}_{it_j} \\\\\n\\left(\n  \\begin{array}{c} \n  b_{0_j} \\\\\n  b_{17_j}\n  \\end{array}\n\\right) \n\\sim&\\ \\text{MV}\\,\\mathcal{N}\n\\left[\n  \\left(\n    \\begin{array}{c}\n    0 \\\\\n    0 \\\\\n    \\end{array}\n  \\right)\n  , \\,\n  \\left(\n  \\begin{array}{cc}\n     \\sigma^2_{0} & \\rho_{0, 17}\\, \\sigma_{0} \\sigma_{17} \\\\ \n     \\cdots & \\sigma^2_{17}\n  \\end{array}\n\\right)\n\\right] \\\\\n\\\\\n\\beta_0 \\ldots \\beta_{17} \\sim&\\ \\operatorname{Student~\\textit{t}\\,}(\\nu = 3, \\mu = 0, \\sigma = 1.5) \\\\\n\\sigma_y, \\sigma_0, \\sigma_{17} \\sim&\\ \\operatorname{Exponential}(1) \\\\\n\\rho \\sim&\\ \\operatorname{LKJ}(2)\n\\end{aligned}\n$$\n\n\n## MCMC diagnostics\n\nAgain, as a check to make sure these weight models converged, here are some visual diagnostics for the total barriers treatment. All the other models look basically the same as these.\n\n### Numerator\n\n::: {.panel-tabset}\n\n#### Trace plots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_treatment_total$model_num %>% \n  gather_draws(`^b_.*|^sd_.*|^sigma`, regex = TRUE) %>% \n  ggplot(aes(x = .iteration, y = .value, color = factor(.chain))) +\n  geom_line(linewidth = 0.1) +\n  scale_color_manual(values = clrs$Sunset[3:6]) +\n  facet_wrap(vars(.variable), scales = \"free_y\") +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-num-trace-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n#### Trank plots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_treatment_total$model_num %>% \n  gather_draws(`^b_.*|^sd_.*|^sigma`, regex = TRUE) %>% \n  group_by(.variable) %>% \n  mutate(draw_rank = rank(.value)) %>% \n  ggplot(aes(x = draw_rank, color = factor(.chain))) +\n  stat_bin(geom = \"step\", binwidth = 500, position = position_identity(), boundary = 0) +\n  scale_color_manual(values = clrs$Sunset[3:6]) +\n  facet_wrap(vars(.variable), scales = \"free_y\") +\n  theme_donors() +\n  theme(axis.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank())\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-num-trank-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n#### Posterior predictive check\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwithr::with_seed(1234, {\n  pp_check(m_purpose_treatment_total$model_num, ndraws = 20) +\n    labs(x = \"Total NGO barriers\",\n         title = \"Numerator model\") +\n    theme_donors()\n})\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-num-ppcheck-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n### Denominator\n\n::: {.panel-tabset}\n\n#### Trace plots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_treatment_total$model_denom %>% \n  gather_draws(`^b_.*|^sd_.*|^cor_.*|^sigma`, regex = TRUE) %>% \n  ggplot(aes(x = .iteration, y = .value, color = factor(.chain))) +\n  geom_line(linewidth = 0.1) +\n  scale_color_manual(values = clrs$Sunset[3:6]) +\n  facet_wrap(vars(.variable), scales = \"free_y\") +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-denom-trace-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n#### Trank plots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_treatment_total$model_denom %>% \n  gather_draws(`^b_.*|^sd_.*|^cor_.*|^sigma`, regex = TRUE) %>% \n  group_by(.variable) %>% \n  mutate(draw_rank = rank(.value)) %>% \n  ggplot(aes(x = draw_rank, color = factor(.chain))) +\n  stat_bin(geom = \"step\", binwidth = 500, position = position_identity(), boundary = 0) +\n  scale_color_manual(values = clrs$Sunset[3:6]) +\n  facet_wrap(vars(.variable), scales = \"free_y\") +\n  theme_donors() +\n  theme(axis.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank())\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-denom-trank-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n#### Posterior predictive check\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwithr::with_seed(1234, {\n  pp_check(m_purpose_treatment_total$model_denom, ndraws = 20) +\n    labs(x = \"Total NGO barriers\",\n         title = \"Denominator model\") +\n    theme_donors()\n})\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-denom-ppcheck-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n\n## Check weights\n\nAgain, IPTWs should generally have a mean of 1 and shouldn't be too incredibly high.\n\n::: {.panel-tabset}\n### Total barriers\n\nThe max weight here is 23, but as with H~1~ there are only a few observations with weights that high. The average is 1.12 and the median is 0.9, which are both close to 1, which is good.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nsummary(df_purpose_iptw_total$iptw)\n##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n##    0.05    0.78    0.90    1.12    1.00   23.34\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_purpose_iptw_total %>% \n  ggplot(aes(x = iptw)) +\n  geom_histogram(binwidth = 0.5, boundary = 0) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-iptws-total-purpose-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### Advocacy\n\nThe max weight here is 10, and the average is 0.96, so we're good still.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nsummary(df_purpose_iptw_advocacy$iptw)\n##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n##    0.01    0.62    0.78    0.96    0.93    9.64\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_purpose_iptw_advocacy %>% \n  ggplot(aes(x = iptw)) +\n  geom_histogram(binwidth = 0.5, boundary = 0) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-iptws-advocacy-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### Entry\n\nThe max weight here is 6 and the average is 0.99, so everything's still great.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nsummary(df_purpose_iptw_entry$iptw)\n##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n##    0.15    0.85    0.94    0.99    1.01    6.20\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_purpose_iptw_entry %>% \n  ggplot(aes(x = iptw)) +\n  geom_histogram(binwidth = 0.5, boundary = 0) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-iptws-entry-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### Funding\n\nThe max weight is 18 and the average is 1.12—great!\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nsummary(df_purpose_iptw_funding$iptw)\n##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n##    0.01    0.82    0.91    1.12    1.00   18.39\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_purpose_iptw_funding %>% \n  ggplot(aes(x = iptw)) +\n  geom_histogram(binwidth = 0.5, boundary = 0) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-iptws-funding-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### Core civil society index\n\nlol these blow up again; the max weight is 1,290,444,671,300,084.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nsummary(df_purpose_iptw_ccsi$iptw)\n##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. \n## 0.00e+00 0.00e+00 0.00e+00 2.48e+12 0.00e+00 1.29e+15\n```\n:::\n\n\nThere aren't a lot of observations with weights that high though—only 100ish:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\ndf_purpose_iptw_ccsi %>% count(iptw >= 50)\n## # A tibble: 2 × 2\n##   `iptw >= 50`     n\n##   <lgl>        <int>\n## 1 FALSE         3009\n## 2 TRUE           147\ndf_purpose_iptw_ccsi %>% count(iptw >= 500)\n## # A tibble: 2 × 2\n##   `iptw >= 500`     n\n##   <lgl>         <int>\n## 1 FALSE          3044\n## 2 TRUE            112\n```\n:::\n\n\nWe truncate these weights at 50.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_iptw_ccsi <- bind_rows(\n  df_purpose_iptw_ccsi %>% mutate(threshold = 50, iptw = ifelse(iptw > threshold, threshold, iptw)),\n  df_purpose_iptw_ccsi %>% mutate(threshold = 500, iptw = ifelse(iptw > threshold, threshold, iptw))\n) %>% \n  mutate(threshold = paste0(\"Truncated at \", threshold),\n         threshold = fct_inorder(threshold))\n\nplot_iptw_ccsi %>% \n  ggplot(aes(x = iptw)) +\n  geom_histogram(bins = 50, boundary = 0) +\n  facet_wrap(vars(threshold), scales = \"free_x\") +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-iptws-ccsi-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### Civil society repression\n\nThese weights are also horrendous, with a maximum weight of 1,771,919.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nsummary(df_purpose_iptw_repress$iptw)\n##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n##       0       0       0    1144       1 1771919\n```\n:::\n\n\nAs with the core civil society index, there aren't a lot of observations with weights that high:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\ndf_purpose_iptw_repress %>% count(iptw >= 50)\n## # A tibble: 2 × 2\n##   `iptw >= 50`     n\n##   <lgl>        <int>\n## 1 FALSE         3004\n## 2 TRUE           152\ndf_purpose_iptw_repress %>% count(iptw >= 500)\n## # A tibble: 2 × 2\n##   `iptw >= 500`     n\n##   <lgl>         <int>\n## 1 FALSE          3069\n## 2 TRUE             87\n```\n:::\n\n\nSo we truncate these weights at 50 again. Since the results from the core civil society models are basically the same when truncating at 500, we only use a truncation point of 50 here.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_purpose_iptw_ccsi %>% \n  mutate(threshold = 50, iptw = ifelse(iptw > threshold, threshold, iptw)) %>% \n  ggplot(aes(x = iptw)) +\n  geom_histogram(bins = 50, boundary = 0) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-iptws-csrepress-1.png){fig-align='center' width=80%}\n:::\n:::\n\n:::\n\n\n## Results\n\nThese are less important since we just use these treatment models to generate weights *and* because interpreting each coefficient when trying to isolate causal effects is unimportant [@WestreichGreenland:2013; @KeeleStevensonElwert:2020].\n\n::: {.panel-tabset}\n\n### Numerator\n\n\n::: {#tbl-h2-num .cell layout-align=\"center\" tbl-cap='Results from all numerator models'}\n\n```{.r .cell-code}\nmodels_tbl_h2_treatment_num <- models_tbl_h2_treatment_num %>% \n  set_names(1:length(.))\n\nnotes <- c(\n  \"Posterior medians; 95% credible intervals in brackets\", \n  \"Total \\\\(R^2\\\\) considers the variance of both population and group effects\", \n  \"Marginal \\\\(R^2\\\\) only takes population effects into account\"\n)\n\nmodelsummary(models_tbl_h2_treatment_num,\n             estimate = \"{estimate}\",\n             statistic = \"[{conf.low}, {conf.high}]\",\n             add_rows = treatment_rows,\n             coef_map = coefs_num,\n             gof_map = gofs,\n             output = \"kableExtra\",\n             fmt =  list(estimate = 2, conf.low = 2, conf.high = 2)) %>% \n  row_spec(1, bold = TRUE) %>% \n  kable_styling(htmltable_class = \"table-sm light-border\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-sm light-border\" style=\"width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:center;\"> 1 </th>\n   <th style=\"text-align:center;\"> 2 </th>\n   <th style=\"text-align:center;\"> 3 </th>\n   <th style=\"text-align:center;\"> 4 </th>\n   <th style=\"text-align:center;\"> 5 </th>\n   <th style=\"text-align:center;\"> 6 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;font-weight: bold;\"> Treatment </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Total barriers (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to advocacy (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to entry (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to funding (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> CCSI (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> CS repression (t) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Treatment (t − 1) </td>\n   <td style=\"text-align:center;\"> 0.99 </td>\n   <td style=\"text-align:center;\"> 1.00 </td>\n   <td style=\"text-align:center;\"> 0.97 </td>\n   <td style=\"text-align:center;\"> 0.99 </td>\n   <td style=\"text-align:center;\"> 0.82 </td>\n   <td style=\"text-align:center;\"> 0.84 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.97, 1.00] </td>\n   <td style=\"text-align:center;\"> [0.98, 1.01] </td>\n   <td style=\"text-align:center;\"> [0.96, 0.99] </td>\n   <td style=\"text-align:center;\"> [0.97, 1.00] </td>\n   <td style=\"text-align:center;\"> [0.80, 0.84] </td>\n   <td style=\"text-align:center;\"> [0.82, 0.86] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Treatment history </td>\n   <td style=\"text-align:center;\"> −0.0001 </td>\n   <td style=\"text-align:center;\"> −0.0005 </td>\n   <td style=\"text-align:center;\"> −0.0003 </td>\n   <td style=\"text-align:center;\"> 0.0002 </td>\n   <td style=\"text-align:center;\"> −0.0007 </td>\n   <td style=\"text-align:center;\"> −0.002 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.001, 0.001] </td>\n   <td style=\"text-align:center;\"> [−0.002, 0.0007] </td>\n   <td style=\"text-align:center;\"> [−0.002, 0.0009] </td>\n   <td style=\"text-align:center;\"> [−0.001, 0.002] </td>\n   <td style=\"text-align:center;\"> [−0.001, −0.0002] </td>\n   <td style=\"text-align:center;\"> [−0.004, −0.001] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Intercept </td>\n   <td style=\"text-align:center;\"> 0.09 </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n   <td style=\"text-align:center;\"> 0.05 </td>\n   <td style=\"text-align:center;\"> 0.03 </td>\n   <td style=\"text-align:center;\"> 0.13 </td>\n   <td style=\"text-align:center;\"> 0.13 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.07, 0.11] </td>\n   <td style=\"text-align:center;\"> [0.01, 0.02] </td>\n   <td style=\"text-align:center;\"> [0.04, 0.07] </td>\n   <td style=\"text-align:center;\"> [0.02, 0.04] </td>\n   <td style=\"text-align:center;\"> [0.11, 0.14] </td>\n   <td style=\"text-align:center;\"> [0.08, 0.17] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Between-country variability (\\(\\sigma_0\\) for \\(b_0\\) offsets) </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n   <td style=\"text-align:center;\"> 0.005 </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> 0.009 </td>\n   <td style=\"text-align:center;\"> 0.05 </td>\n   <td style=\"text-align:center;\"> 0.25 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.001, 0.06] </td>\n   <td style=\"text-align:center;\"> [0.0002, 0.01] </td>\n   <td style=\"text-align:center;\"> [0.0008, 0.04] </td>\n   <td style=\"text-align:center;\"> [0.0004, 0.03] </td>\n   <td style=\"text-align:center;\"> [0.04, 0.06] </td>\n   <td style=\"text-align:center;\"> [0.21, 0.30] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Model variability (\\(\\sigma_y\\)) </td>\n   <td style=\"text-align:center;\"> 0.47 </td>\n   <td style=\"text-align:center;\"> 0.12 </td>\n   <td style=\"text-align:center;\"> 0.24 </td>\n   <td style=\"text-align:center;\"> 0.23 </td>\n   <td style=\"text-align:center;\"> 0.06 </td>\n   <td style=\"text-align:center;\"> 0.31 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;box-shadow: 0px 1px\">  </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.46, 0.48] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.12, 0.12] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.24, 0.25] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.22, 0.23] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.05, 0.06] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.30, 0.32] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:center;\"> 3011 </td>\n   <td style=\"text-align:center;\"> 3011 </td>\n   <td style=\"text-align:center;\"> 3011 </td>\n   <td style=\"text-align:center;\"> 3011 </td>\n   <td style=\"text-align:center;\"> 3130 </td>\n   <td style=\"text-align:center;\"> 3272 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> \\(R^2\\) (total) </td>\n   <td style=\"text-align:center;\"> 0.94 </td>\n   <td style=\"text-align:center;\"> 0.95 </td>\n   <td style=\"text-align:center;\"> 0.92 </td>\n   <td style=\"text-align:center;\"> 0.94 </td>\n   <td style=\"text-align:center;\"> 0.96 </td>\n   <td style=\"text-align:center;\"> 0.95 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> \\(R^2\\) (marginal) </td>\n   <td style=\"text-align:center;\"> 0.94 </td>\n   <td style=\"text-align:center;\"> 0.95 </td>\n   <td style=\"text-align:center;\"> 0.92 </td>\n   <td style=\"text-align:center;\"> 0.94 </td>\n   <td style=\"text-align:center;\"> 0.90 </td>\n   <td style=\"text-align:center;\"> 0.89 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Denominator\n\n\n::: {#tbl-h2-denom .cell layout-align=\"center\" tbl-cap='Results from all numerator models'}\n\n```{.r .cell-code}\nmodels_tbl_h2_treatment_denom <- models_tbl_h2_treatment_denom %>% \n  set_names(1:length(.))\n\nnotes <- c(\n  \"Posterior medians; 95% credible intervals in brackets\", \n  \"Total \\\\(R^2\\\\) considers the variance of both population and group effects\", \n  \"Marginal \\\\(R^2\\\\) only takes population effects into account\"\n)\n\nmodelsummary(models_tbl_h2_treatment_denom,\n             estimate = \"{estimate}\",\n             statistic = \"[{conf.low}, {conf.high}]\",\n             add_rows = treatment_rows,\n             coef_map = coefs_denom,\n             gof_map = gofs,\n             fmt =  list(estimate = 2, conf.low = 2, conf.high = 2),\n             notes = notes) %>% \n  row_spec(1, bold = TRUE) %>% \n  kable_styling(htmltable_class = \"table-sm light-border\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"NAborder-bottom: 0;border-bottom: 0;border-bottom: 0; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;\" class=\"table table-sm light-border\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:center;\"> 1 </th>\n   <th style=\"text-align:center;\"> 2 </th>\n   <th style=\"text-align:center;\"> 3 </th>\n   <th style=\"text-align:center;\"> 4 </th>\n   <th style=\"text-align:center;\"> 5 </th>\n   <th style=\"text-align:center;\"> 6 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;font-weight: bold;\"> Treatment </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Total barriers (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to advocacy (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to entry (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to funding (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> CCSI (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> CS repression (t) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Treatment (t − 1) </td>\n   <td style=\"text-align:center;\"> 0.97 </td>\n   <td style=\"text-align:center;\"> 0.98 </td>\n   <td style=\"text-align:center;\"> 0.97 </td>\n   <td style=\"text-align:center;\"> 0.97 </td>\n   <td style=\"text-align:center;\"> 0.33 </td>\n   <td style=\"text-align:center;\"> 0.45 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.96, 0.99] </td>\n   <td style=\"text-align:center;\"> [0.96, 1.00] </td>\n   <td style=\"text-align:center;\"> [0.95, 0.98] </td>\n   <td style=\"text-align:center;\"> [0.95, 0.99] </td>\n   <td style=\"text-align:center;\"> [0.30, 0.36] </td>\n   <td style=\"text-align:center;\"> [0.42, 0.48] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Treatment history </td>\n   <td style=\"text-align:center;\"> −0.0008 </td>\n   <td style=\"text-align:center;\"> 0.0002 </td>\n   <td style=\"text-align:center;\"> −0.001 </td>\n   <td style=\"text-align:center;\"> 0.00007 </td>\n   <td style=\"text-align:center;\"> −0.002 </td>\n   <td style=\"text-align:center;\"> −0.003 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.002, 0.0007] </td>\n   <td style=\"text-align:center;\"> [−0.002, 0.002] </td>\n   <td style=\"text-align:center;\"> [−0.002, 0.0004] </td>\n   <td style=\"text-align:center;\"> [−0.001, 0.002] </td>\n   <td style=\"text-align:center;\"> [−0.003, 0.0001] </td>\n   <td style=\"text-align:center;\"> [−0.005, −0.001] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Proportion of contentious aid (t − 1) </td>\n   <td style=\"text-align:center;\"> −0.005 </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> 0.002 </td>\n   <td style=\"text-align:center;\"> −0.008 </td>\n   <td style=\"text-align:center;\"> −0.001 </td>\n   <td style=\"text-align:center;\"> 0.05 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.18, 0.17] </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.06] </td>\n   <td style=\"text-align:center;\"> [−0.09, 0.09] </td>\n   <td style=\"text-align:center;\"> [−0.09, 0.08] </td>\n   <td style=\"text-align:center;\"> [−0.02, 0.02] </td>\n   <td style=\"text-align:center;\"> [−0.05, 0.16] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Polyarchy </td>\n   <td style=\"text-align:center;\"> −0.12 </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n   <td style=\"text-align:center;\"> −0.10 </td>\n   <td style=\"text-align:center;\"> −0.05 </td>\n   <td style=\"text-align:center;\"> 0.03 </td>\n   <td style=\"text-align:center;\"> −0.03 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.29, 0.06] </td>\n   <td style=\"text-align:center;\"> [−0.02, 0.07] </td>\n   <td style=\"text-align:center;\"> [−0.19, 0.0002] </td>\n   <td style=\"text-align:center;\"> [−0.14, 0.04] </td>\n   <td style=\"text-align:center;\"> [−0.002, 0.06] </td>\n   <td style=\"text-align:center;\"> [−0.21, 0.15] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Corruption index </td>\n   <td style=\"text-align:center;\"> −0.11 </td>\n   <td style=\"text-align:center;\"> −0.02 </td>\n   <td style=\"text-align:center;\"> −0.04 </td>\n   <td style=\"text-align:center;\"> −0.05 </td>\n   <td style=\"text-align:center;\"> −0.04 </td>\n   <td style=\"text-align:center;\"> −0.24 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.29, 0.06] </td>\n   <td style=\"text-align:center;\"> [−0.07, 0.03] </td>\n   <td style=\"text-align:center;\"> [−0.13, 0.06] </td>\n   <td style=\"text-align:center;\"> [−0.14, 0.04] </td>\n   <td style=\"text-align:center;\"> [−0.08, 0.007] </td>\n   <td style=\"text-align:center;\"> [−0.50, 0.01] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Rule of law index </td>\n   <td style=\"text-align:center;\"> −0.14 </td>\n   <td style=\"text-align:center;\"> −0.04 </td>\n   <td style=\"text-align:center;\"> −0.04 </td>\n   <td style=\"text-align:center;\"> −0.05 </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n   <td style=\"text-align:center;\"> 0.22 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.34, 0.06] </td>\n   <td style=\"text-align:center;\"> [−0.09, 0.02] </td>\n   <td style=\"text-align:center;\"> [−0.14, 0.07] </td>\n   <td style=\"text-align:center;\"> [−0.15, 0.05] </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.07] </td>\n   <td style=\"text-align:center;\"> [−0.06, 0.51] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Civil liberties index </td>\n   <td style=\"text-align:center;\"> −0.45 </td>\n   <td style=\"text-align:center;\"> −0.16 </td>\n   <td style=\"text-align:center;\"> −0.16 </td>\n   <td style=\"text-align:center;\"> −0.12 </td>\n   <td style=\"text-align:center;\"> 0.90 </td>\n   <td style=\"text-align:center;\"> 2.92 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.98, 0.07] </td>\n   <td style=\"text-align:center;\"> [−0.30, −0.01] </td>\n   <td style=\"text-align:center;\"> [−0.44, 0.12] </td>\n   <td style=\"text-align:center;\"> [−0.38, 0.13] </td>\n   <td style=\"text-align:center;\"> [0.83, 0.98] </td>\n   <td style=\"text-align:center;\"> [2.47, 3.36] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Physical violence index </td>\n   <td style=\"text-align:center;\"> 0.26 </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n   <td style=\"text-align:center;\"> 0.10 </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n   <td style=\"text-align:center;\"> −0.20 </td>\n   <td style=\"text-align:center;\"> −0.14 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.03, 0.50] </td>\n   <td style=\"text-align:center;\"> [0.008, 0.14] </td>\n   <td style=\"text-align:center;\"> [−0.02, 0.23] </td>\n   <td style=\"text-align:center;\"> [−0.04, 0.19] </td>\n   <td style=\"text-align:center;\"> [−0.24, −0.16] </td>\n   <td style=\"text-align:center;\"> [−0.37, 0.09] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Private civil liberties index </td>\n   <td style=\"text-align:center;\"> 0.15 </td>\n   <td style=\"text-align:center;\"> 0.06 </td>\n   <td style=\"text-align:center;\"> 0.08 </td>\n   <td style=\"text-align:center;\"> 0.004 </td>\n   <td style=\"text-align:center;\"> −0.10 </td>\n   <td style=\"text-align:center;\"> −0.18 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.13, 0.43] </td>\n   <td style=\"text-align:center;\"> [−0.01, 0.14] </td>\n   <td style=\"text-align:center;\"> [−0.07, 0.23] </td>\n   <td style=\"text-align:center;\"> [−0.14, 0.14] </td>\n   <td style=\"text-align:center;\"> [−0.15, −0.06] </td>\n   <td style=\"text-align:center;\"> [−0.46, 0.10] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Log GDP/capita (standardized) </td>\n   <td style=\"text-align:center;\"> −0.02 </td>\n   <td style=\"text-align:center;\"> −0.004 </td>\n   <td style=\"text-align:center;\"> −0.005 </td>\n   <td style=\"text-align:center;\"> −0.01 </td>\n   <td style=\"text-align:center;\"> −0.02 </td>\n   <td style=\"text-align:center;\"> −0.02 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.05, 0.008] </td>\n   <td style=\"text-align:center;\"> [−0.01, 0.004] </td>\n   <td style=\"text-align:center;\"> [−0.02, 0.01] </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.003] </td>\n   <td style=\"text-align:center;\"> [−0.03, −0.005] </td>\n   <td style=\"text-align:center;\"> [−0.09, 0.04] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Percent of GDP from trade </td>\n   <td style=\"text-align:center;\"> −0.02 </td>\n   <td style=\"text-align:center;\"> 0.003 </td>\n   <td style=\"text-align:center;\"> −0.02 </td>\n   <td style=\"text-align:center;\"> −0.01 </td>\n   <td style=\"text-align:center;\"> −0.007 </td>\n   <td style=\"text-align:center;\"> −0.01 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.07, 0.02] </td>\n   <td style=\"text-align:center;\"> [−0.008, 0.02] </td>\n   <td style=\"text-align:center;\"> [−0.04, 0.006] </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.01] </td>\n   <td style=\"text-align:center;\"> [−0.02, 0.002] </td>\n   <td style=\"text-align:center;\"> [−0.07, 0.04] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Educational equality index </td>\n   <td style=\"text-align:center;\"> −0.01 </td>\n   <td style=\"text-align:center;\"> −0.0007 </td>\n   <td style=\"text-align:center;\"> −0.002 </td>\n   <td style=\"text-align:center;\"> −0.01 </td>\n   <td style=\"text-align:center;\"> −0.009 </td>\n   <td style=\"text-align:center;\"> 0.04 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.04, 0.01] </td>\n   <td style=\"text-align:center;\"> [−0.008, 0.007] </td>\n   <td style=\"text-align:center;\"> [−0.02, 0.01] </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.002] </td>\n   <td style=\"text-align:center;\"> [−0.02, −0.001] </td>\n   <td style=\"text-align:center;\"> [−0.006, 0.08] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Health equality index </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n   <td style=\"text-align:center;\"> 0.002 </td>\n   <td style=\"text-align:center;\"> 0.001 </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n   <td style=\"text-align:center;\"> −0.002 </td>\n   <td style=\"text-align:center;\"> −0.03 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.01, 0.05] </td>\n   <td style=\"text-align:center;\"> [−0.007, 0.01] </td>\n   <td style=\"text-align:center;\"> [−0.02, 0.02] </td>\n   <td style=\"text-align:center;\"> [0.002, 0.03] </td>\n   <td style=\"text-align:center;\"> [−0.01, 0.006] </td>\n   <td style=\"text-align:center;\"> [−0.07, 0.02] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Infant mortality rate </td>\n   <td style=\"text-align:center;\"> −0.0006 </td>\n   <td style=\"text-align:center;\"> −0.00005 </td>\n   <td style=\"text-align:center;\"> −0.0001 </td>\n   <td style=\"text-align:center;\"> −0.0004 </td>\n   <td style=\"text-align:center;\"> 0.0001 </td>\n   <td style=\"text-align:center;\"> 0.0009 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.001, 0.0003] </td>\n   <td style=\"text-align:center;\"> [−0.0003, 0.0002] </td>\n   <td style=\"text-align:center;\"> [−0.0006, 0.0004] </td>\n   <td style=\"text-align:center;\"> [−0.0008, 0.00008] </td>\n   <td style=\"text-align:center;\"> [−0.0002, 0.0004] </td>\n   <td style=\"text-align:center;\"> [−0.0008, 0.003] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Internal conflict in past 5 years </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> 0.004 </td>\n   <td style=\"text-align:center;\"> 0.005 </td>\n   <td style=\"text-align:center;\"> 0.006 </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> −0.008 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.06] </td>\n   <td style=\"text-align:center;\"> [−0.008, 0.02] </td>\n   <td style=\"text-align:center;\"> [−0.02, 0.03] </td>\n   <td style=\"text-align:center;\"> [−0.01, 0.03] </td>\n   <td style=\"text-align:center;\"> [0.005, 0.02] </td>\n   <td style=\"text-align:center;\"> [−0.05, 0.03] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Count of natural disasters </td>\n   <td style=\"text-align:center;\"> 0.005 </td>\n   <td style=\"text-align:center;\"> 0.001 </td>\n   <td style=\"text-align:center;\"> 0.002 </td>\n   <td style=\"text-align:center;\"> 0.002 </td>\n   <td style=\"text-align:center;\"> 0.0001 </td>\n   <td style=\"text-align:center;\"> 0.007 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.0003, 0.01] </td>\n   <td style=\"text-align:center;\"> [−0.0004, 0.002] </td>\n   <td style=\"text-align:center;\"> [−0.0008, 0.005] </td>\n   <td style=\"text-align:center;\"> [−0.0008, 0.004] </td>\n   <td style=\"text-align:center;\"> [−0.0007, 0.001] </td>\n   <td style=\"text-align:center;\"> [0.002, 0.01] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Intercept </td>\n   <td style=\"text-align:center;\"> 0.35 </td>\n   <td style=\"text-align:center;\"> 0.04 </td>\n   <td style=\"text-align:center;\"> 0.14 </td>\n   <td style=\"text-align:center;\"> 0.16 </td>\n   <td style=\"text-align:center;\"> 0.05 </td>\n   <td style=\"text-align:center;\"> −1.23 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.18, 0.52] </td>\n   <td style=\"text-align:center;\"> [−0.004, 0.09] </td>\n   <td style=\"text-align:center;\"> [0.05, 0.23] </td>\n   <td style=\"text-align:center;\"> [0.08, 0.24] </td>\n   <td style=\"text-align:center;\"> [0.006, 0.10] </td>\n   <td style=\"text-align:center;\"> [−1.48, −0.98] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Year trend </td>\n   <td style=\"text-align:center;\"> 0.006 </td>\n   <td style=\"text-align:center;\"> 0.001 </td>\n   <td style=\"text-align:center;\"> 0.003 </td>\n   <td style=\"text-align:center;\"> 0.002 </td>\n   <td style=\"text-align:center;\"> 0.001 </td>\n   <td style=\"text-align:center;\"> −0.003 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.003, 0.01] </td>\n   <td style=\"text-align:center;\"> [−0.00005, 0.002] </td>\n   <td style=\"text-align:center;\"> [0.001, 0.005] </td>\n   <td style=\"text-align:center;\"> [0.0008, 0.004] </td>\n   <td style=\"text-align:center;\"> [−0.00002, 0.003] </td>\n   <td style=\"text-align:center;\"> [−0.007, 0.002] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Between-country intercept variability (\\(\\sigma_0\\) for \\(b_0\\) offsets) </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n   <td style=\"text-align:center;\"> 0.009 </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> 0.06 </td>\n   <td style=\"text-align:center;\"> 0.32 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.0007, 0.05] </td>\n   <td style=\"text-align:center;\"> [0.001, 0.02] </td>\n   <td style=\"text-align:center;\"> [0.0006, 0.03] </td>\n   <td style=\"text-align:center;\"> [0.0005, 0.03] </td>\n   <td style=\"text-align:center;\"> [0.05, 0.07] </td>\n   <td style=\"text-align:center;\"> [0.28, 0.38] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Between-country year variability (\\(\\sigma_{17}\\) for \\(b_{17}\\) offsets) </td>\n   <td style=\"text-align:center;\"> 0.003 </td>\n   <td style=\"text-align:center;\"> 0.003 </td>\n   <td style=\"text-align:center;\"> 0.001 </td>\n   <td style=\"text-align:center;\"> 0.001 </td>\n   <td style=\"text-align:center;\"> 0.004 </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.0001, 0.008] </td>\n   <td style=\"text-align:center;\"> [0.002, 0.004] </td>\n   <td style=\"text-align:center;\"> [0.00005, 0.003] </td>\n   <td style=\"text-align:center;\"> [0.00005, 0.003] </td>\n   <td style=\"text-align:center;\"> [0.003, 0.004] </td>\n   <td style=\"text-align:center;\"> [0.02, 0.02] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Correlation between random intercepts and slopes (\\(\\rho\\)) </td>\n   <td style=\"text-align:center;\"> 0.06 </td>\n   <td style=\"text-align:center;\"> 0.66 </td>\n   <td style=\"text-align:center;\"> 0.06 </td>\n   <td style=\"text-align:center;\"> 0.02 </td>\n   <td style=\"text-align:center;\"> −0.13 </td>\n   <td style=\"text-align:center;\"> −0.15 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.79, 0.82] </td>\n   <td style=\"text-align:center;\"> [−0.09, 0.95] </td>\n   <td style=\"text-align:center;\"> [−0.79, 0.82] </td>\n   <td style=\"text-align:center;\"> [−0.81, 0.82] </td>\n   <td style=\"text-align:center;\"> [−0.31, 0.06] </td>\n   <td style=\"text-align:center;\"> [−0.33, 0.05] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Model variability (\\(\\sigma_y\\)) </td>\n   <td style=\"text-align:center;\"> 0.46 </td>\n   <td style=\"text-align:center;\"> 0.12 </td>\n   <td style=\"text-align:center;\"> 0.24 </td>\n   <td style=\"text-align:center;\"> 0.22 </td>\n   <td style=\"text-align:center;\"> 0.04 </td>\n   <td style=\"text-align:center;\"> 0.25 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;box-shadow: 0px 1px\">  </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.45, 0.48] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.12, 0.12] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.24, 0.25] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.22, 0.23] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.04, 0.04] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [0.25, 0.26] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:center;\"> 3011 </td>\n   <td style=\"text-align:center;\"> 3011 </td>\n   <td style=\"text-align:center;\"> 3011 </td>\n   <td style=\"text-align:center;\"> 3011 </td>\n   <td style=\"text-align:center;\"> 3130 </td>\n   <td style=\"text-align:center;\"> 3272 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> \\(R^2\\) (total) </td>\n   <td style=\"text-align:center;\"> 0.94 </td>\n   <td style=\"text-align:center;\"> 0.95 </td>\n   <td style=\"text-align:center;\"> 0.93 </td>\n   <td style=\"text-align:center;\"> 0.94 </td>\n   <td style=\"text-align:center;\"> 0.98 </td>\n   <td style=\"text-align:center;\"> 0.97 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> \\(R^2\\) (marginal) </td>\n   <td style=\"text-align:center;\"> 0.94 </td>\n   <td style=\"text-align:center;\"> 0.95 </td>\n   <td style=\"text-align:center;\"> 0.92 </td>\n   <td style=\"text-align:center;\"> 0.94 </td>\n   <td style=\"text-align:center;\"> 0.92 </td>\n   <td style=\"text-align:center;\"> 0.89 </td>\n  </tr>\n</tbody>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup></sup> Posterior medians; 95% credible intervals in brackets</td></tr></tfoot>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup></sup> Total \\(R^2\\) considers the variance of both population and group effects</td></tr></tfoot>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup></sup> Marginal \\(R^2\\) only takes population effects into account</td></tr></tfoot>\n</table>\n\n`````\n:::\n:::\n\n\n:::\n\n\n# Outcome models\n\nOur outcome variable for this hypothesis is the proportion of aid allocated to contentious issues, which is (1) bounded between 0% and 100% and (2) has a lot of zeros.\n\n\n::: {#tbl-zero-summary .cell layout-align=\"center\" tbl-cap='0s in proportion of contentious aid'}\n\n```{.r .cell-code}\ndf_country_aid_laws %>% \n  count(is_zero = prop_contentious == 0) %>% \n  mutate(Outcome = \"Proportion of contentious aid\") %>% \n  mutate(`Number of 0s` = glue(\"{n[2]} / {sum(n)}\")) %>% \n  mutate(`Proportion of 0s` = label_percent(accuracy = 0.1)(n / sum(n))) %>% \n  filter(is_zero) %>% select(-is_zero, -n) %>% \n  kbl(align = c(\"l\", \"c\", \"c\")) %>% \n  kable_styling(htmltable_class = \"table table-sm\",\n                full_width = FALSE)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" table table-sm\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Outcome </th>\n   <th style=\"text-align:center;\"> Number of 0s </th>\n   <th style=\"text-align:center;\"> Proportion of 0s </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Proportion of contentious aid </td>\n   <td style=\"text-align:center;\"> 479 / 3293 </td>\n   <td style=\"text-align:center;\"> 14.5% </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_country_aid_laws %>%\n  mutate(is_zero = prop_contentious == 0) %>% \n  mutate(prop_contentious = ifelse(is_zero, -0.01, prop_contentious))  %>%  \n  ggplot(aes(x = prop_contentious)) +\n  geom_histogram(aes(fill = is_zero), binwidth = 0.05, \n                 linewidth = 0.25, boundary = 0, color = \"white\") +\n  geom_vline(xintercept = 0) + \n  scale_x_continuous(labels = label_percent()) +\n  scale_y_continuous(labels = label_comma()) +\n  scale_fill_manual(values = c(clrs$Prism[2], clrs$Prism[8]), \n                    guide = guide_legend(reverse = TRUE)) +\n  labs(x = \"Proportion of contentious aid\", y = \"Count\", fill = \"Is zero?\") +\n  theme_donors() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-zero-purpose-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\nBecause of this distribution, we use a zero-inflated beta family to model the outcome. [This guide to working with tricky outcomes with lots of zeros](model-tricky-outcomes.qmd#zero-inflated-models-proportions) explores all the intricacies of zero-inflated beta families, so we won't go into tons of detail here.\n\nFollowing our marginal structural model approach, we need to run a model weighted by the stabilized inverse probability weights that includes covariates for lagged treatment $X_{i, t-1}$, treatment history $\\sum_{\\tau = (t-2)}^{t} X_{i\\tau}$, and non-time-varying confounders $Z_i$. We expand on this approach to account for the panel structure of the data by using a multilevel hierarchical model with country-specific intercepts and a year trend with country-specific offsets (following yet another guide I wrote for this project, [this one on multilevel panel data](https://www.andrewheiss.com/blog/2021/12/01/multilevel-models-panel-data-guide/)). We center the year at 2000 so that (1) the intercept is interpretable [@Schielzeth:2010] and (2) the MCMC simulation runs faster and more efficiently [@McElreath:2020 §13.4, pp. 420–422]. \n\nAs with foreign aid, we’re not entirely sure what the actual underlying zero process is for the proportion of contentious aid, but from looking at the data, we know that there’s a time component—in the early 2000s, very few countries received no contentious aid. We thus model the zero-inflated part of the model with year and year squared since the year trend is parabolic and nonlinear.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndf_country_aid_laws %>% \n  group_by(year) %>% \n  summarize(prop_zero = mean(prop_contentious == 0)) %>% \n  ggplot(aes(x = year, y = prop_zero)) +\n  geom_line(linewidth = 0.5, color = \"grey70\") +\n  geom_point(size = 1) + \n  geom_smooth(aes(color = \"y = x\"), method = \"lm\", \n              formula = y ~ x, se = FALSE) +\n  geom_smooth(aes(color = \"y = x + x<sup>2</sup>\"), method = \"lm\", \n              formula = y ~ x + I(x^2), se = FALSE) +\n  scale_y_continuous(labels = label_percent()) +\n  scale_color_manual(values = clrs$Prism[c(3, 11)]) +\n  labs(x = NULL, y = \"Proportion of countries\\nwith zero contentious aid\",\n       color = NULL) +\n  theme_donors() +\n  theme(legend.text = element_markdown())\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-prop-zero-zi-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n## Formal model and priors\n\nOur final model looks like this (again with `treatment` replaced by the actual treatment column):\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nbf(prop_contentious | weights(iptw) ~ treatment_lag1 + treatment_lag2_cumsum +\n     year_c + (1 + year_c | gwcode),\n   zi ~ year_c + I(year_c^2))\n```\n:::\n\n\nOr more formally:\n\n::: {.column-page-inset-right}\n\n$$\n\\begin{aligned}\n&\\ \\mathrlap{\\textbf{Zero-inflated model of proportion $i$ across time $t$ within each country $j$}} \\\\\n\\text{Proportion}_{it_j} \\sim&\\ \\mathrlap{\\begin{cases}\n0 & \\text{with probability } \\pi_{it} + [(1 - \\pi_{it}) \\times \\operatorname{Beta}(0 \\mid \\mu_{it_j}, \\phi_y)] \\\\[4pt]\n\\operatorname{Beta}(\\mu_{it_j}, \\phi_y) & \\text{with probability } (1 - \\pi_{it}) \\times \\operatorname{Beta}(\\text{Proportion}_{it_j} \\mid \\mu_{it_j}, \\phi_y)\n\\end{cases}} \\\\\n\\\\\n&\\ \\textbf{Models for distribution parameters} \\\\\n\\operatorname{logit}(\\pi_{it}) =&\\ \\gamma_0 + \\gamma_1 \\text{Year}_{it} + \\gamma_2 \\text{Year}^2_{it} & \\text{Zero-inflation process} \\\\[4pt]\n\\operatorname{logit}(\\mu_{it_j}) =&\\ \\text{IPTW}_{i, t-1_j} \\times \\Bigl[ (\\beta_0 + b_{0_j}) + \\beta_1\\, \\text{Treatment}_{i, t-1_j} + \\\\\n&\\ \\beta_2\\, \\textstyle{\\sum_{\\tau = (t-2)}^{t}} \\text{Treatment}_{i\\tau} + (\\beta_3 + b_{3_j}) \\text{Year}_{it_j} \\Bigr] & \\text{Within-country variation} \\\\[4pt]\n\\left(\n  \\begin{array}{c} \n  b_{0_j} \\\\\n  b_{3_j}\n  \\end{array}\n\\right) \n\\sim&\\ \\text{MV}\\,\\mathcal{N}\n\\left[\n  \\left(\n    \\begin{array}{c}\n    0 \\\\\n    0 \\\\\n    \\end{array}\n  \\right)\n  , \\,\n  \\left(\n  \\begin{array}{cc}\n     \\sigma^2_{0} & \\rho_{0, 3}\\, \\sigma_{0} \\sigma_{3} \\\\ \n     \\cdots & \\sigma^2_{3}\n  \\end{array}\n\\right)\n\\right] & \\text{Variability in average intercepts and slopes} \\\\\n\\\\\n&\\ \\textbf{Priors} \\\\\n\\gamma_0 \\sim&\\ \\text{Student $t$}(\\nu = 3, \\mu = 0, \\sigma = 1.5) & \\text{Prior for intercept in zero-inflated model} \\\\\n\\gamma_1, \\gamma_2 \\sim&\\ \\text{Student $t$}(3, 0, 1.5) & \\text{Prior for year effect in zero-inflated model} \\\\\n\\beta_0 \\sim&\\ \\text{Student $t$}(3, 0, 1.5) & \\text{Prior for global average proportion} \\\\\n\\beta_1, \\beta_2, \\beta_3 \\sim&\\ \\text{Student $t$}(3, 0, 1.5) & \\text{Prior for global effects} \\\\\n\\phi_y \\sim&\\ \\operatorname{Exponential}(1) & \\text{Prior for within-country dispersion} \\\\\n\\sigma_0, \\sigma_3 \\sim&\\ \\operatorname{Exponential}(1) & \\text{Prior for within-country variability} \\\\\n\\rho \\sim&\\ \\operatorname{LKJ}(2) & \\text{Prior for between-country variability}\n\\end{aligned}\n$$\n\n:::\n\nHere's what those priors look like:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndesign <- \"\n  AAABBB\n  CCCDDD\n  EEFFGG\n\"\n\nm_purpose_outcome_total$priors %>% \n  parse_dist() %>% \n  # K = dimension of correlation matrix; \n  # ours is 2x2 here because we have one random slope\n  marginalize_lkjcorr(K = 2) %>%\n  mutate(nice_title = glue(\"**{class}**: {prior}\"),\n         stage = ifelse(dpar == \"zi\", \"Zero-inflated part (π)\", \"Beta part (µ and φ)\")) %>% \n  mutate(nice_title = fct_inorder(nice_title),\n         stage = fct_rev(fct_inorder(stage))) %>% \n  ggplot(aes(y = 0, dist = .dist, args = .args, fill = prior)) +\n  stat_slab(normalize = \"panels\") +\n  scale_fill_manual(values = clrs$Prism[1:6]) +\n  facet_manual(vars(stage, nice_title), design = design, scales = \"free_x\",\n               strip = strip_nested(background_x = list(element_rect(fill = \"grey92\"), NULL),\n                                    by_layer_x = TRUE)) +\n  guides(fill = \"none\") +\n  labs(x = NULL, y = NULL) +\n  theme_donors(prior = TRUE) +\n  theme(strip.text = element_markdown())\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-outcome-priors-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n## MCMC diagnostics\n\nTo check that everything converged nicely, we check some diagnostics for the outcome models for the total barriers treatment. All the other models look basically the same as this—everything's fine.\n\n::: {.panel-tabset}\n\n### Trace plots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_outcome_total$model %>% \n  gather_draws(`^b_.*|^sd_.*|^phi`, regex = TRUE) %>% \n  ggplot(aes(x = .iteration, y = .value, color = factor(.chain))) +\n  geom_line(linewidth = 0.1) +\n  scale_color_manual(values = clrs$Sunset[3:6]) +\n  facet_wrap(vars(.variable), scales = \"free_y\") +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-outcome-trace-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### Trank plots\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_outcome_total$model %>% \n  gather_draws(`^b_.*|^sd_.*|^phi`, regex = TRUE) %>% \n  group_by(.variable) %>% \n  mutate(draw_rank = rank(.value)) %>% \n  ggplot(aes(x = draw_rank, color = factor(.chain))) +\n  stat_bin(geom = \"step\", binwidth = 1000, position = position_identity(), boundary = 0) +\n  scale_color_manual(values = clrs$Sunset[3:6]) +\n  facet_wrap(vars(.variable), scales = \"free_y\") +\n  theme_donors() +\n  theme(axis.text.y = element_blank(), axis.title.y = element_blank(), axis.ticks.y = element_blank())\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-outcome-trank-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### Posterior predictive check\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwithr::with_seed(1234, {\n  pp_check(m_purpose_outcome_total$model, ndraws = 20) +\n    labs(x = \"Proportion of contentious aid\",\n         title = \"Outcome model\") +\n    theme_donors() +\n    coord_cartesian(xlim = c(0, 1))\n})\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-outcome-ppcheck-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n## Analyzing the posterior\n\n### Average treatment effects (global analysis)\n\nIn this project we care most about *conditional effects*, or the effect of the treatment in a typical country, or effect of the treatment when all country-specific $b_0$ and $b_3$ estimates are set to 0.\n\n::: {.panel-tabset}\n#### Total barriers\n\nIn general, contentious aid doesn't really change at all as additional legal barriers are added. The slope of the line is 0.02 percentage points, with a credible interval that ranges between -0.2 and 0.25 percentage points. The effect is essentially zero.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_outcome_total$model %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_total$model,\n                                 year_c = 0,\n                                 barriers_total = seq(0, 10, 1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = barriers_total, y = .epred)) +\n  stat_lineribbon(color = clrs$Peach[7]) +\n  scale_x_continuous(breaks = seq(0, 10, by = 2)) +\n  scale_y_continuous(labels = label_percent()) +\n  scale_fill_manual(values = clrs$Peach[1:3]) +\n  guides(fill = \"none\") +\n  labs(x = \"Total barriers\", y = \"Predicted proportion of\\ncontentious aid in the following year\") +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-range-total-1.png){fig-align='center' width=80%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$total %>% \n  select(barriers_total, dydx, conf.low, conf.high)\n##    barriers_total     dydx conf.low conf.high\n## 1               0 0.000202 -0.00223   0.00243\n## 2               1 0.000203 -0.00216   0.00253\n## 3               2 0.000204 -0.00209   0.00263\n## 4               3 0.000204 -0.00202   0.00274\n## 5               4 0.000205 -0.00195   0.00285\n## 6               5 0.000206 -0.00189   0.00296\n## 7               6 0.000206 -0.00182   0.00308\n## 8               7 0.000207 -0.00176   0.00320\n## 9               8 0.000208 -0.00170   0.00332\n## 10              9 0.000208 -0.00165   0.00345\n## 11             10 0.000209 -0.00159   0.00358\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_total_p_direction <- mfx_purpose_cfx_multiple$total %>% \n  posteriordraws() %>% \n  filter(barriers_total == 1) %>% \n  summarize(pd = sum(draw < 0) / n()) %>% \n  mutate(pd_short = round(pd, 2))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$total %>% \n  posteriordraws() %>% \n  filter(barriers_total %in% c(1, 7)) %>% \n  pivot_longer(draw) %>% \n  ggplot(aes(x = value, fill = factor(barriers_total))) +\n  stat_halfeye(alpha = 0.7) +\n  scale_x_continuous(labels = label_number(style_negative = \"minus\")) +\n  scale_fill_manual(values = clrs$Sunset[c(2, 4, 6)]) +\n  labs(x = \"Conditional effect of total barriers on the\\nproportion of contentious aid in the following year\", y = NULL,\n       subtitle = glue(\"P(ATE > 0) = {1 - pull(mfx_total_p_direction, pd_short)}\"), fill = NULL) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-mfx-total-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n#### Advocacy\n\nContentious aid *increases* a little in response to restrictions on advocacy. The marginal effect when moving from 1 to 2 advocacy restrictions is half a percentage point, and the probability that it's greater than zero is 0.85.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_outcome_advocacy$model %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_advocacy$model,\n                                 year_c = 0,\n                                 advocacy = seq(0, 2, 1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = advocacy, y = .epred)) +\n  stat_lineribbon(color = clrs$Peach[7]) +\n  scale_x_continuous(breaks = 0:2) +\n  scale_y_continuous(labels = label_percent()) +\n  scale_fill_manual(values = clrs$Peach[1:3]) +\n  guides(fill = \"none\") +\n  labs(x = \"Barriers to advocacy\", y = \"Predicted proportion of\\ncontentious aid in the following year\") +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-range-advocacy-1.png){fig-align='center' width=80%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$advocacy %>% \n  select(advocacy, dydx, conf.low, conf.high)\n##   advocacy    dydx conf.low conf.high\n## 1        0 0.00455 -0.00421    0.0128\n## 2        1 0.00489 -0.00395    0.0158\n## 3        2 0.00525 -0.00370    0.0192\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_advocacy_p_direction <- mfx_purpose_cfx_multiple$advocacy %>% \n  posteriordraws() %>% \n  filter(advocacy == 1) %>% \n  summarize(pd = sum(draw > 0) / n()) %>% \n  mutate(pd_short = round(pd, 2))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$advocacy %>% \n  posteriordraws() %>% \n  pivot_longer(draw) %>% \n  ggplot(aes(x = value, fill = factor(advocacy))) +\n  stat_halfeye(alpha = 0.7) +\n  scale_x_continuous(labels = label_number(style_negative = \"minus\")) +\n  scale_fill_manual(values = clrs$Sunset[c(2, 4, 6)]) +\n  labs(x = \"Conditional effect of barriers to advocacy on the\\nproportion of contentious aid in the following year\", y = NULL,\n       subtitle = glue(\"P(ATE > 0) = {pull(mfx_advocacy_p_direction, pd_short)}\"), fill = NULL) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-mfx-advocacy-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n#### Entry\n\nContentious aid *increases* a little in response to restrictions on entry. The marginal effect is 0.3 percentage points, and the probability that it's greater than zero is 0.89.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_outcome_entry$model %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_entry$model,\n                                 year_c = 0,\n                                 entry = seq(0, 3, 1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = entry, y = .epred)) +\n  stat_lineribbon(color = clrs$Peach[7]) +\n  scale_x_continuous(breaks = 0:3) +\n  scale_y_continuous(labels = label_percent()) +\n  scale_fill_manual(values = clrs$Peach[1:3]) +\n  guides(fill = \"none\") +\n  labs(x = \"Barriers to entry\", y = \"Predicted proportion of\\ncontentious aid in the following year\") +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-range-entry-1.png){fig-align='center' width=80%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$entry %>% \n  select(entry, dydx, conf.low, conf.high)\n##   entry    dydx conf.low conf.high\n## 1     0 0.00275 -0.00182   0.00687\n## 2     1 0.00287 -0.00177   0.00767\n## 3     2 0.00299 -0.00173   0.00855\n## 4     3 0.00312 -0.00168   0.00950\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_entry_p_direction <- mfx_purpose_cfx_multiple$entry %>% \n  posteriordraws() %>% \n  filter(entry == 1) %>% \n  summarize(pd = sum(draw > 0) / n()) %>% \n  mutate(pd_short = round(pd, 2))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$entry %>% \n  posteriordraws() %>% \n  pivot_longer(draw) %>% \n  ggplot(aes(x = value, fill = factor(entry))) +\n  stat_halfeye(alpha = 0.7) +\n  scale_x_continuous(labels = label_number(style_negative = \"minus\")) +\n  scale_fill_manual(values = clrs$Sunset[c(2, 4, 6, 7)]) +\n  labs(x = \"Conditional effect of barriers to entry on the\\nproportion of contentious aid in the following year\", y = NULL,\n       subtitle = glue(\"P(ATE > 0) = {pull(mfx_entry_p_direction, pd_short)}\"), fill = NULL) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-mfx-entry-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n#### Funding\n\nContentious aid *decreases* a little in response to restrictions on funding. The marginal effect is -0.3 percentage points, and the probability that it's less than 0 is 0.87.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_outcome_funding$model %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_funding$model,\n                                 year_c = 0,\n                                 funding = seq(0, 4, 1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = funding, y = .epred)) +\n  stat_lineribbon(color = clrs$Peach[7]) +\n  scale_x_continuous(breaks = 0:4) +\n  scale_y_continuous(labels = label_percent()) +\n  scale_fill_manual(values = clrs$Peach[1:3]) +\n  guides(fill = \"none\") +\n  labs(x = \"Barriers to funding\", y = \"Predicted proportion of\\ncontentious aid in the following year\") +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-range-funding-1.png){fig-align='center' width=80%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$funding %>% \n  select(funding, dydx, conf.low, conf.high)\n##   funding     dydx conf.low conf.high\n## 1       0 -0.00311 -0.00867   0.00216\n## 2       1 -0.00297 -0.00764   0.00224\n## 3       2 -0.00283 -0.00670   0.00231\n## 4       3 -0.00269 -0.00587   0.00239\n## 5       4 -0.00257 -0.00514   0.00247\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_funding_p_direction <- mfx_purpose_cfx_multiple$funding %>% \n  posteriordraws() %>% \n  filter(funding == 1) %>% \n  summarize(pd = sum(draw < 0) / n()) %>% \n  mutate(pd_short = round(pd, 2))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$funding %>% \n  posteriordraws() %>% \n  pivot_longer(draw) %>% \n  ggplot(aes(x = value, fill = factor(funding))) +\n  stat_halfeye(alpha = 0.7) +\n  scale_x_continuous(labels = label_number(style_negative = \"minus\")) +\n  scale_fill_manual(values = clrs$Sunset[c(1, 2, 4, 6, 7)]) +\n  labs(x = \"Conditional effect of barriers to funding on the\\nproportion of contentious aid in the following year\", y = NULL,\n       subtitle = glue(\"P(ATE < 0) = {pull(mfx_funding_p_direction, pd_short)}\"), fill = NULL) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-mfx-funding-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n#### Core civil society index\n\nContentious aid doesn't do much in response to changes in the de facto civil society environment. The official marginal effect is 0.01 percentage points (basically zero!) and the probability that it's greater than zero is only 0.64.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_outcome_ccsi$model_50 %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_ccsi$model_50,\n                                 year_c = 0,\n                                 v2xcs_ccsi = seq(0, 1, 0.1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = v2xcs_ccsi, y = .epred)) +\n  stat_lineribbon(color = clrs$Peach[7]) +\n  scale_x_reverse() +\n  scale_y_continuous(labels = label_percent()) +\n  scale_fill_manual(values = clrs$Peach[1:3]) +\n  guides(fill = \"none\") +\n  labs(x = \"Core civil society index\", y = \"Predicted proportion of\\ncontentious aid in the following year\",\n       caption = \"**x-axis reversed**; lower values represent worse respect for civil society\") +\n  theme_donors() +\n  theme(plot.caption = element_markdown())\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-range-ccsi-1.png){fig-align='center' width=80%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$ccsi %>% \n  select(v2xcs_ccsi, dydx, conf.low, conf.high)\n##   v2xcs_ccsi    dydx conf.low conf.high\n## 1        0.0 0.00112 -0.00579   0.00762\n## 2        0.5 0.00115 -0.00518   0.00889\n## 3        1.0 0.00118 -0.00465   0.01042\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_ccsi_p_direction <- mfx_purpose_cfx_multiple$ccsi %>% \n  posteriordraws() %>% \n  filter(v2xcs_ccsi == 0.5) %>% \n  summarize(pd = sum(draw < 0) / n()) %>% \n  mutate(pd_short = round(pd, 2))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$ccsi %>% \n  posteriordraws() %>% \n  mutate(draw = -draw) %>% \n  pivot_longer(draw) %>% \n  ggplot(aes(x = value, fill = factor(v2xcs_ccsi))) +\n  stat_halfeye(alpha = 0.7) +\n  scale_x_continuous(labels = label_number(style_negative = \"minus\")) +\n  scale_fill_manual(values = clrs$Sunset[c(1, 2, 4, 6, 7)]) +\n  labs(x = \"Conditional effect of worsening the\\ncore civil society index on contentious aid in the following year\", y = NULL,\n       subtitle = glue(\"P(ATE < 0) = {1 - pull(mfx_ccsi_p_direction, pd_short)}\"), fill = NULL) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-mfx-ccsi-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n#### Civil society repression\n\nHowever, contentious aid *increases* as repression decreases or improves a little (0.16 percentage points, with a 100% probability of being greater than zero). Or in reverse, as civil society gets worse, contentious aid *decreases* (following @Bush:2015). This is interesting since it's the opposite-ish for de jure restrictions—when barriers to advocacy and entry are enacted, contentious aid increases a little bit. But when the practical lived level of civil society repression increases, contentious aid drops. \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm_purpose_outcome_repress$model_50 %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_repress$model_50,\n                                 year_c = 0,\n                                 v2csreprss = seq(-4, 3, 0.25)),\n              re_formula = NA)  %>% \n  ggplot(aes(x = v2csreprss, y = .epred)) +\n  stat_lineribbon(color = clrs$Peach[7]) +\n  scale_x_reverse(labels = label_number(style_negative = \"minus\")) +\n  scale_y_continuous(labels = label_percent()) +\n  scale_fill_manual(values = clrs$Peach[1:3]) +\n  guides(fill = \"none\") +\n  labs(x = \"Civil society repression\", y = \"Predicted proportion of\\ncontentious aid in the following year\",\n       caption = \"**x-axis reversed**; lower values represent greater civil society repression\") +\n  theme_donors() +\n  theme(plot.caption = element_markdown())\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-range-repress-1.png){fig-align='center' width=80%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$repress %>% \n  select(v2csreprss, dydx, conf.low, conf.high)\n##   v2csreprss    dydx conf.low conf.high\n## 1         -2 0.00143 0.000536   0.00273\n## 2          0 0.00162 0.000568   0.00325\n## 3          2 0.00184 0.000597   0.00389\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_repress_p_direction <- mfx_purpose_cfx_multiple$repress %>% \n  posteriordraws() %>% \n  filter(v2csreprss == 0) %>% \n  summarize(pd = sum(draw < 0) / n()) %>% \n  mutate(pd_short = round(pd, 2))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_purpose_cfx_multiple$repress %>% \n  posteriordraws() %>% \n  mutate(draw = -draw) %>% \n  pivot_longer(draw) %>% \n  ggplot(aes(x = value, fill = factor(v2csreprss))) +\n  stat_halfeye(alpha = 0.7) +\n  scale_x_continuous(labels = label_number(style_negative = \"minus\")) +\n  scale_fill_manual(values = clrs$Sunset[c(1, 2, 4, 6, 7)]) +\n  labs(x = \"Conditional effect of worsening\\ncivil society repression on contentious aid in the following year\", y = NULL,\n       subtitle = glue(\"P(ATE < 0) = {1 - pull(mfx_repress_p_direction, pd_short)}\"), fill = NULL) +\n  theme_donors()\n```\n\n::: {.cell-output-display}\n![](models_aid-contentiousness_files/figure-html/plot-cfx-mfx-repress-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n\n### Combined plots\n\n#### Predictions\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nci_cols <- c(\"grey70\", \"grey45\", \"grey20\")\n\np1 <- m_purpose_outcome_total$model %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_total$model,\n                                 year_c = 0,\n                                 barriers_total = seq(0, 10, 1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = barriers_total, y = .epred)) +\n  stat_lineribbon(aes(color = \"Posterior median\"), \n                  alpha = 0.6, point_interval = median_hdci) +\n  scale_x_continuous(breaks = seq(0, 10, by = 2)) +\n  scale_y_continuous(labels = label_percent(accuracy = 1)) +\n  scale_color_manual(\n    values = clrs$PurpOr[7],\n    guide = guide_legend(order = 1, \n                         override.aes = list(fill = NA, alpha = 1, color = \"black\"))\n  ) +\n  scale_fill_manual(\n    values = clrs$PurpOr[c(1, 3, 5)], \n    labels = function(x) label_percent()(as.numeric(x)),\n    guide = guide_legend(order = 2, \n                         override.aes = list(color = NA, fill = ci_cols))\n  ) +\n  labs(x = NULL, y = NULL, color = NULL, fill = \"Credible interval (HPDI):\") +\n  coord_cartesian(ylim = c(0.035, 0.085)) +\n  facet_wrap(vars(\"Total barriers\")) +\n  theme_donors() + \n  theme(legend.margin = margin(l = 7.5, r = 7.5))\n\np2 <- m_purpose_outcome_advocacy$model %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_advocacy$model,\n                                 year_c = 0,\n                                 advocacy = seq(0, 2, 1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = advocacy, y = .epred)) +\n  stat_lineribbon(aes(color = \"Posterior median\"), \n                  alpha = 0.6, point_interval = median_hdci) +\n  scale_x_continuous(breaks = 0:2) +\n  scale_y_continuous(labels = label_percent(accuracy = 1)) +\n  scale_color_manual(\n    values = clrs$Teal[7],\n    guide = guide_legend(order = 1, \n                         override.aes = list(fill = NA, alpha = 1, color = \"black\"))\n  ) +\n  scale_fill_manual(\n    values = clrs$Teal[c(1, 3, 5)], \n    labels = function(x) label_percent()(as.numeric(x)),\n    guide = guide_legend(order = 2, \n                         override.aes = list(color = NA, fill = ci_cols))\n  ) +\n  labs(x = NULL, y = NULL, color = NULL, fill = \"Credible interval (HPDI):\") +\n  coord_cartesian(ylim = c(0.035, 0.085)) +\n  facet_wrap(vars(\"Barriers to advocacy\")) +\n  theme_donors() + \n  theme(legend.margin = margin(l = 7.5, r = 7.5))\n\np3 <- m_purpose_outcome_entry$model %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_entry$model,\n                                 year_c = 0,\n                                 entry = seq(0, 3, 1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = entry, y = .epred)) +\n  stat_lineribbon(aes(color = \"Posterior median\"), \n                  alpha = 0.6, point_interval = median_hdci) +\n  scale_x_continuous(breaks = 0:3) +\n  scale_y_continuous(labels = label_percent(accuracy = 1)) +\n  scale_color_manual(\n    values = clrs$Emrld[7],\n    guide = guide_legend(order = 1, \n                         override.aes = list(fill = NA, alpha = 1, color = \"black\"))\n  ) +\n  scale_fill_manual(\n    values = clrs$Emrld[c(1, 3, 5)], \n    labels = function(x) label_percent()(as.numeric(x)),\n    guide = guide_legend(order = 2, \n                         override.aes = list(color = NA, fill = ci_cols))\n  ) +\n  labs(x = NULL, y = NULL, color = NULL, fill = \"Credible interval (HPDI):\") +\n  coord_cartesian(ylim = c(0.035, 0.085)) +\n  facet_wrap(vars(\"Barriers to entry\")) +\n  theme_donors() + \n  theme(legend.margin = margin(l = 7.5, r = 7.5))\n\np4 <- m_purpose_outcome_funding$model %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_funding$model,\n                                 year_c = 0,\n                                 funding = seq(0, 4, 1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = funding, y = .epred)) +\n  stat_lineribbon(aes(color = \"Posterior median\"), \n                  alpha = 0.6, point_interval = median_hdci) +\n  scale_x_continuous(breaks = 0:4) +\n  scale_y_continuous(labels = label_percent(accuracy = 1)) +\n  scale_color_manual(\n    values = clrs$Peach[7],\n    guide = guide_legend(order = 1, \n                         override.aes = list(fill = NA, alpha = 1, color = \"black\"))\n  ) +\n  scale_fill_manual(\n    values = clrs$Peach[c(1, 3, 5)], \n    labels = function(x) label_percent()(as.numeric(x)),\n    guide = guide_legend(order = 2, \n                         override.aes = list(color = NA, fill = ci_cols))\n  ) +\n  labs(x = NULL, y = NULL, color = NULL, fill = \"Credible interval (HPDI):\") +\n  coord_cartesian(ylim = c(0.035, 0.085)) +\n  facet_wrap(vars(\"Barriers to funding\")) +\n  theme_donors() + \n  theme(legend.margin = margin(l = 7.5, r = 7.5))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Put the shared y-axis label in a separate plot and add it to the combined plot\n# https://stackoverflow.com/a/66778622/120898\np_lab <- ggplot() + \n  annotate(geom = \"text\", x = 1, y = 1, angle = 90, size = 3.3, fontface = \"bold\",\n           label = \"Predicted proportion of\\ncontentious aid in the following year\") +\n  coord_cartesian(clip = \"off\") +\n  theme_void()\n\n(p_lab | \n    ((p1 | p2) / (p3 | p4) + \n       plot_layout(guides = \"collect\") + \n       plot_annotation(theme = theme(legend.position = \"bottom\")))) + \n  plot_layout(widths = c(0.05, 1))\n```\n\n::: {.cell-output-display}\n![The effect of de jure anti-NGO legal barriers on the predicted proportion of contentious aid in a typical country](models_aid-contentiousness_files/figure-html/plot-cfx-predictions-combined-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np1 <- m_purpose_outcome_ccsi$model_50 %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_ccsi$model_50,\n                                 year_c = 0,\n                                 v2xcs_ccsi = seq(0, 1, 0.1)),\n              re_formula = NA) %>% \n  ggplot(aes(x = v2xcs_ccsi, y = .epred)) +\n  stat_lineribbon(aes(color = \"Posterior median\"), \n                  alpha = 0.6, point_interval = median_hdci) +\n  scale_x_reverse(breaks = seq(0, 1, by = 0.25)) +\n  scale_y_continuous(labels = label_percent(accuracy = 1)) +\n  scale_color_manual(\n    values = clrs$Sunset[4],\n    guide = guide_legend(order = 1, \n                         override.aes = list(fill = NA, alpha = 1, color = \"black\"))\n  ) +\n  scale_fill_manual(\n    values = clrs$Sunset[c(1, 2, 3)], \n    labels = function(x) label_percent()(as.numeric(x)),\n    guide = guide_legend(order = 2, \n                         override.aes = list(color = NA, fill = ci_cols))\n  ) +\n  labs(x = NULL, y = NULL, color = NULL, fill = \"Credible interval (HPDI):\") +\n  coord_cartesian(ylim = c(0.01, 0.05)) +\n  facet_wrap(vars(\"Worsening core civil society index\")) +\n  theme_donors() +\n  theme(legend.margin = margin(l = 7.5, r = 7.5))\n\np2 <- m_purpose_outcome_repress$model_50 %>% \n  epred_draws(newdata = datagrid(model = m_purpose_outcome_repress$model_50,\n                                 year_c = 0,\n                                 v2csreprss = seq(-4, 3, 0.25)),\n              re_formula = NA) %>% \n  ggplot(aes(x = v2csreprss, y = .epred)) +\n  stat_lineribbon(aes(color = \"Posterior median\"), \n                  alpha = 0.6, point_interval = median_hdci) +\n  scale_x_reverse(labels = label_number(style_negative = \"minus\")) +\n  scale_y_continuous(labels = label_percent(accuracy = 1)) +\n  scale_color_manual(\n    values = clrs$Sunset[7],\n    guide = guide_legend(order = 1, \n                         override.aes = list(fill = NA, alpha = 1, color = \"black\"))\n  ) +\n  scale_fill_manual(\n    values = clrs$Sunset[c(4, 5, 6)], \n    labels = function(x) label_percent()(as.numeric(x)),\n    guide = guide_legend(order = 2, \n                         override.aes = list(color = NA, fill = ci_cols))\n  ) +\n  labs(x = NULL, y = NULL, color = NULL, fill = \"Credible interval (HPDI):\",\n       caption = \"**x-axis reversed**; lower values represent worse respect for and repression of civil society\") +\n  coord_cartesian(ylim = c(0.01, 0.05)) +\n  facet_wrap(vars(\"Worsening civil society repression\")) +\n  theme_donors() +\n  theme(legend.margin = margin(l = 7.5, r = 7.5),\n        plot.caption = element_markdown())\n\np_lab <- ggplot() + \n  annotate(geom = \"text\", x = 1, y = 1, angle = 90, size = 3.3, fontface = \"bold\",\n           label = \"Predicted proportion of\\ncontentious aid in the following year\") +\n  coord_cartesian(clip = \"off\") +\n  theme_void()\n\n(p_lab | \n    ((p1 | p2) + \n       plot_layout(guides = \"collect\") + \n       plot_annotation(theme = theme(legend.position = \"bottom\")))) + \n  plot_layout(widths = c(0.05, 1))\n```\n\n::: {.cell-output-display}\n![The effect of the de facto civil society legal environment on the predicted proportion of contentious aid in a typical country](models_aid-contentiousness_files/figure-html/plot-cfx-predictions-defacto-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n\n#### Conditional marginal effects\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmfx_total_stats <- mfx_purpose_cfx_single$total %>% \n  posteriordraws() %>% \n  summarize(pd = sum(draw < 0) / n(),\n            mad = mad(draw),\n            med_hdci = median_hdci(draw)) %>% \n  unnest(med_hdci) %>% \n  mutate(pd_short = round(pd, 2))\n\nmfx_advocacy_stats <- mfx_purpose_cfx_single$advocacy %>% \n  posteriordraws() %>% \n  summarize(pd = sum(draw < 0) / n(),\n            mad = mad(draw),\n            med_hdci = median_hdci(draw)) %>% \n  unnest(med_hdci) %>% \n  mutate(pd_short = round(pd, 2))\n\nmfx_entry_stats <- mfx_purpose_cfx_single$entry %>% \n  posteriordraws() %>% \n  summarize(pd = sum(draw < 0) / n(),\n            mad = mad(draw),\n            med_hdci = median_hdci(draw)) %>% \n  unnest(med_hdci) %>% \n  mutate(pd_short = round(pd, 2))\n\nmfx_funding_stats <- mfx_purpose_cfx_single$funding %>% \n  posteriordraws() %>% \n  summarize(pd = sum(draw < 0) / n(),\n            mad = mad(draw),\n            med_hdci = median_hdci(draw)) %>% \n  unnest(med_hdci) %>% \n  mutate(pd_short = round(pd, 2))\n\nmfx_ccsi_stats <- mfx_purpose_cfx_single$ccsi %>% \n  posteriordraws() %>% \n  summarize(pd = sum(draw < 0) / n(),\n            mad = mad(draw),\n            med_hdci = median_hdci(draw)) %>% \n  unnest(med_hdci) %>% \n  mutate(pd_short = round(pd, 2))\n\nmfx_repress_stats <- mfx_purpose_cfx_single$repress %>% \n  posteriordraws() %>% \n  summarize(pd = sum(draw < 0) / n(),\n            mad = mad(draw),\n            med_hdci = median_hdci(draw)) %>% \n  unnest(med_hdci) %>% \n  mutate(pd_short = round(pd, 2))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np1 <- mfx_purpose_cfx_single$total %>% \n  posteriordraws() %>% \n  ggplot(aes(x = draw)) +\n  stat_halfeye(aes(fill_ramp = after_stat(x < 0)),\n               fill = clrs$PurpOr[6], .width = c(0.8, 0.95),\n               point_interval = median_hdci) +\n  geom_vline(xintercept = 0, linewidth = 0.25) +\n  annotate(geom = \"richtext\", label = glue(\"P(ATE > 0) = {1 - pull(mfx_total_stats, pd_short)}\"),\n           x = Inf, y = Inf, hjust = 1, vjust = 1, size = 3,\n           label.color = NA, label.margin = unit(rep(0.5, 4), \"lines\")) +\n  scale_x_continuous(labels = label_number(scale = 100, suffix = \" pp.\",\n                                           style_negative = \"minus\")) +\n  scale_fill_ramp_discrete(from = clrs$PurpOr[4], guide = \"none\") +\n  labs(x = NULL, y = NULL, fill = NULL) +\n  facet_wrap(vars(\"One additional barrier of any type\")) +\n  theme_donors() +\n  theme(axis.text.y = element_blank())\n\np2 <- mfx_purpose_cfx_single$advocacy %>% \n  posteriordraws() %>% \n  ggplot(aes(x = draw)) +\n  stat_halfeye(aes(fill_ramp = after_stat(x < 0)),\n               fill = clrs$Teal[4], .width = c(0.8, 0.95),\n               point_interval = median_hdci) +\n  geom_vline(xintercept = 0, linewidth = 0.25) +\n  annotate(geom = \"richtext\", label = glue(\"P(ATE > 0) = {1 - pull(mfx_advocacy_stats, pd_short)}\"),\n           x = Inf, y = Inf, hjust = 1, vjust = 1, size = 3,\n           label.color = NA, label.margin = unit(rep(0.5, 4), \"lines\")) +\n  scale_x_continuous(labels = label_number(scale = 100, suffix = \" pp.\",\n                                           style_negative = \"minus\")) +\n  scale_fill_ramp_discrete(from = clrs$Teal[6], guide = \"none\") +\n  labs(x = NULL, y = NULL, fill = NULL) +\n  facet_wrap(vars(\"One additional barrier to advocacy\")) +\n  theme_donors() +\n  theme(axis.text.y = element_blank())\n\np3 <- mfx_purpose_cfx_single$entry %>% \n  posteriordraws() %>% \n  ggplot(aes(x = draw)) +\n  stat_halfeye(aes(fill_ramp = after_stat(x < 0)),\n               fill = clrs$Emrld[4], .width = c(0.8, 0.95),\n               point_interval = median_hdci) +\n  geom_vline(xintercept = 0, linewidth = 0.25) +\n  annotate(geom = \"richtext\", label = glue(\"P(ATE > 0) = {1 - pull(mfx_entry_stats, pd_short)}\"),\n           x = Inf, y = Inf, hjust = 1, vjust = 1, size = 3,\n           label.color = NA, label.margin = unit(rep(0.5, 4), \"lines\")) +\n  scale_x_continuous(labels = label_number(scale = 100, suffix = \" pp.\",\n                                           style_negative = \"minus\")) +\n  scale_fill_ramp_discrete(from = clrs$Emrld[6], guide = \"none\") +\n  labs(x = NULL, y = NULL, fill = NULL) +\n  facet_wrap(vars(\"One additional barrier to entry\")) +\n  theme_donors() +\n  theme(axis.text.y = element_blank())\n\np4 <- mfx_purpose_cfx_single$funding %>% \n  posteriordraws() %>% \n  ggplot(aes(x = draw)) +\n  stat_halfeye(aes(fill_ramp = after_stat(x < 0)),\n               fill = clrs$Peach[6], .width = c(0.8, 0.95),\n               point_interval = median_hdci) +\n  geom_vline(xintercept = 0, linewidth = 0.25) +\n  annotate(geom = \"richtext\", label = glue(\"P(ATE < 0) = {pull(mfx_funding_stats, pd_short)}\"),\n           x = Inf, y = Inf, hjust = 1, vjust = 1, size = 3,\n           label.color = NA, label.margin = unit(rep(0.5, 4), \"lines\")) +\n  scale_x_continuous(labels = label_number(scale = 100, suffix = \" pp.\",\n                                           style_negative = \"minus\")) +\n  scale_fill_ramp_discrete(from = clrs$Peach[4], guide = \"none\") +\n  labs(x = NULL, y = NULL, fill = NULL) +\n  facet_wrap(vars(\"One additional barrier to funding\")) +\n  theme_donors() +\n  theme(axis.text.y = element_blank())\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_lab <- ggplot() + \n  annotate(geom = \"text\", x = 1, y = 1, size = 3.3, fontface = \"bold\",\n           label = \"Conditional effect of treatment on proportion\\nof contentious aid in the following year\") +\n  coord_cartesian(clip = \"off\") +\n  theme_void()\n\n(((p1 | p2) / (p3 | p4)) / p_lab) + \n  plot_layout(heights = c(1, 1, 0.1)) +\n  plot_annotation(caption = \"Point shows median value;\\nthick bar = 80% credible interval; thin bar = 95% credible interval\")\n```\n\n::: {.cell-output-display}\n![The effect of one additional de jure anti-NGO legal barrier on the predicted proportion of contentious aid in a typical country](models_aid-contentiousness_files/figure-html/plot-cfx-mfx-combined-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np1 <- mfx_purpose_cfx_single$ccsi %>% \n  posteriordraws() %>% \n  mutate(draw = -draw / 10) %>% \n  ggplot(aes(x = draw)) +\n  stat_halfeye(aes(fill_ramp = after_stat(x < 0)),\n               fill = clrs$Sunset[4], .width = c(0.8, 0.95),\n               point_interval = median_hdci) +\n  geom_vline(xintercept = 0, linewidth = 0.25) +\n  annotate(geom = \"richtext\", label = glue(\"P(ATE < 0) = {1 - pull(mfx_ccsi_stats, pd_short)}\"),\n           x = Inf, y = Inf, hjust = 1, vjust = 1, size = 3,\n           label.color = NA, label.margin = unit(rep(0.5, 4), \"lines\")) +\n  scale_x_continuous(labels = label_number(scale = 100, suffix = \" pp.\",\n                                           style_negative = \"minus\")) +\n  scale_fill_ramp_discrete(from = clrs$Sunset[3], guide = \"none\") +\n  labs(x = NULL, y = NULL, fill = NULL) +\n  facet_wrap(vars(\"A 0.1 unit decrease (worsening) in\\nthe core civil society index\")) +\n  theme_donors() +\n  theme(axis.text.y = element_blank())\n\np2 <- mfx_purpose_cfx_single$repress %>% \n  posteriordraws() %>% \n  mutate(draw = -draw) %>% \n  ggplot(aes(x = draw)) +\n  stat_halfeye(aes(fill_ramp = after_stat(x > 0)),\n               fill = clrs$Sunset[6], .width = c(0.8, 0.95),\n               point_interval = median_hdci) +\n  geom_vline(xintercept = 0, linewidth = 0.25) +\n  annotate(geom = \"richtext\", label = glue(\"P(ATE < 0) = {1 - pull(mfx_repress_stats, pd_short)}\"),\n           x = Inf, y = Inf, hjust = 1, vjust = 1, size = 3,\n           label.color = NA, label.margin = unit(rep(0.5, 4), \"lines\")) +\n  scale_x_continuous(labels = label_number(scale = 100, suffix = \" pp.\",\n                                           style_negative = \"minus\")) +\n  scale_fill_ramp_discrete(from = clrs$Sunset[3], guide = \"none\") +\n  labs(x = NULL, y = NULL, fill = NULL) +\n  facet_wrap(vars(\"A 1 unit decrease (worsening) in\\nthe civil society repression score\")) +\n  theme_donors() +\n  theme(axis.text.y = element_blank())\n\np_lab <- ggplot() + \n  annotate(geom = \"text\", x = 1, y = 1, size = 3.3, fontface = \"bold\",\n           label = \"Conditional effect of treatment on proportion\\nof contentious aid in the following year\") +\n  coord_cartesian(clip = \"off\") +\n  theme_void()\n\n((p1 | p2) / p_lab) + \n  plot_layout(heights = c(1, 0.15)) +\n  plot_annotation(caption = \"Point shows median value;\\nthick bar = 80% credible interval; thin bar = 95% credible interval\")\n```\n\n::: {.cell-output-display}\n![The effect of changes in the de facto civil society legal environment on the predicted proportion of contentious aid in a typical country](models_aid-contentiousness_files/figure-html/plot-cfx-mfx-defacto-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n\n#### Table\n\nWith H~1~ we had to convert the dollar-scale treatment effects into percent changes to make them more interpretable, since we were working with millions of dollars. With this outcome, though, we're just working with a 0–100% range, so we can stick with percentage point-scale effects. \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsignif_pp <- label_number(accuracy = 0.01, scale = 100, suffix = \" pp.\",\n                          style_negative = \"minus\")\nsignif_no_pp <- label_number(accuracy = 0.01, scale = 100,\n                             style_negative = \"minus\")\n\nmfx_lookup <- tribble(\n  ~term, ~Treatment,\n  \"barriers_total\", \"One additional barrier of any type\",\n  \"advocacy\", \"One additional barrier to advocacy\",\n  \"entry\", \"One additional barrier to entry\",\n  \"funding\", \"One additional barrier to funding\",\n  \"v2xcs_ccsi\", \"A 0.1 unit decrease in the core civil society index (i.e. worse environment)\",\n  \"v2csreprss\", \"A 1 unit decrease in the civil society repression score (i.e. more repression)\"\n) %>% \n  mutate(Treatment = fct_inorder(Treatment))\n\nmfx_all_posteriors <- bind_rows(\n  posteriordraws(mfx_purpose_cfx_single$total), \n  posteriordraws(mfx_purpose_cfx_single$advocacy), \n  posteriordraws(mfx_purpose_cfx_single$entry), \n  posteriordraws(mfx_purpose_cfx_single$funding),\n  (posteriordraws(mfx_purpose_cfx_single$ccsi) %>% mutate(draw = draw / 10)),\n  posteriordraws(mfx_purpose_cfx_single$repress)) %>% \n  mutate(draw = ifelse(term %in% c(\"v2xcs_ccsi\", \"v2csreprss\"), -draw, draw),\n         dydx = ifelse(term %in% c(\"v2xcs_ccsi\", \"v2csreprss\"), -dydx, dydx),\n         conf.low_real = ifelse(term %in% c(\"v2xcs_ccsi\", \"v2csreprss\"), -conf.high, conf.low),\n         conf.high_real = ifelse(term %in% c(\"v2xcs_ccsi\", \"v2csreprss\"), -conf.low, conf.high),\n         conf.low = conf.low_real, conf.high = conf.high_real)\n\nmfx_p_direction <- mfx_all_posteriors %>% \n  group_by(term) %>% \n  summarize(pd_lt = round(sum(draw < 0) / n(), 2),\n            pd_gt = round(sum(draw > 0) / n(), 2))\n\nmfx_medians <- mfx_all_posteriors %>% \n  group_by(term) %>% \n  median_hdci(draw) %>%\n  left_join(mfx_p_direction, by = \"term\") %>% \n  mutate(direction = case_when(\n    draw > 0 ~ \"more contentious aid in the next year\",\n    draw < 0 ~ \"less contentious aid in the next year\"\n  )) %>% \n  mutate(pd = case_when(\n    draw > 0 ~ pd_gt,\n    draw < 0 ~ pd_lt\n  )) %>% \n  mutate(pd_nice = label_percent(accuracy = 1)(pd)) %>% \n  mutate(across(c(draw, .upper), ~signif_pp(.))) %>% \n  mutate(.lower = signif_no_pp(.lower)) %>% \n  mutate(interval = glue(\"[{.lower}, {.upper}]\")) %>% \n  mutate(draw_nice = glue(\"{draw}\\n{interval}\")) %>% \n  left_join(mfx_lookup, by = \"term\")\n\nmfx_medians_with_plots <- mfx_medians %>% \n  group_by(term) %>% \n  nest() %>% \n  mutate(sparkplot = map(data, ~spark_bar(.x))) %>% \n  mutate(sparkname = glue(\"sparkplots/contentiousness_bar_{term}\")) %>% \n  mutate(saved_plot = map2(sparkplot, sparkname, ~save_sparks(.x, .y)))\n\nmfx_median_clean <- mfx_medians_with_plots %>% \n  ungroup() %>% \n  select(-sparkplot) %>% \n  unnest_wider(saved_plot) %>% \n  unnest(data) %>% \n  arrange(Treatment)\n```\n:::\n\n::: {.cell .column-screen-inset-right layout-align=\"center\"}\n\n```{.r .cell-code}\ntbl_notes <- c(\"The probability denotes the percentage of the posterior distribution that falls above or below 0.\",\n               \"Reported values are the median posterior marginal effect of each treatment variable on the outcome, multiplied by 100 to show percentage point changes; 95% highest posterior density intervals (HPDI) shown in brackets.\")\n\nmfx_median_clean %>% \n  mutate(Probability = \"\") %>% \n  # mutate(across(c(draw.nice, pct_change.nice), ~linebreak(., align = \"c\"))) %>%  # For LaTeX\n  mutate(draw_nice = str_replace(draw_nice, \"\\\\n\", \"<br>\")) %>% \n  select(Treatment, direction, Probability, draw_nice) %>% \n  set_names(c(paste0(\"Probability\", footnote_marker_symbol(1)),\n              \"Countries that add…\", \n              \"…receive…\", \n              paste0(\"Median\", footnote_marker_symbol(2)))) %>% \n  kbl(align = c(\"l\", \"l\", \"l\", \"c\"), escape = FALSE) %>% \n  kable_styling(htmltable_class = \"table table-sm table-borderless\") %>% \n  pack_rows(\"De jure legislation\", 1, 4, indent = FALSE) %>% \n  pack_rows(\"De facto enforcement\", 5, 6, indent = FALSE) %>% \n  column_spec(1, width = \"34%\") %>% \n  column_spec(2, width = \"34%\") %>% \n  column_spec(3, image = mfx_median_clean$png, width = \"14%\") %>% \n  column_spec(4, width = \"18%\") %>% \n  footnote(symbol = tbl_notes, footnote_as_chunk = FALSE)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" table table-sm table-borderless\" style=\"margin-left: auto; margin-right: auto;border-bottom: 0;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Probability<sup>*</sup> </th>\n   <th style=\"text-align:left;\"> Countries that add… </th>\n   <th style=\"text-align:left;\"> …receive… </th>\n   <th style=\"text-align:center;\"> Median<sup>†</sup> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"4\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>De jure legislation</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;width: 34%; \"> One additional barrier of any type </td>\n   <td style=\"text-align:left;width: 34%; \"> more contentious aid in the next year </td>\n   <td style=\"text-align:left;width: 14%; \">  <img src=\"sparkplots/contentiousness_bar_barriers_total.png\">\n</td>\n   <td style=\"text-align:center;width: 18%; \"> 0.02 pp.<br>[−0.21, 0.25 pp.] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;width: 34%; \"> One additional barrier to advocacy </td>\n   <td style=\"text-align:left;width: 34%; \"> more contentious aid in the next year </td>\n   <td style=\"text-align:left;width: 14%; \">  <img src=\"sparkplots/contentiousness_bar_advocacy.png\">\n</td>\n   <td style=\"text-align:center;width: 18%; \"> 0.49 pp.<br>[−0.43, 1.52 pp.] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;width: 34%; \"> One additional barrier to entry </td>\n   <td style=\"text-align:left;width: 34%; \"> more contentious aid in the next year </td>\n   <td style=\"text-align:left;width: 14%; \">  <img src=\"sparkplots/contentiousness_bar_entry.png\">\n</td>\n   <td style=\"text-align:center;width: 18%; \"> 0.29 pp.<br>[−0.19, 0.75 pp.] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;width: 34%; \"> One additional barrier to funding </td>\n   <td style=\"text-align:left;width: 34%; \"> less contentious aid in the next year </td>\n   <td style=\"text-align:left;width: 14%; \">  <img src=\"sparkplots/contentiousness_bar_funding.png\">\n</td>\n   <td style=\"text-align:center;width: 18%; \"> −0.30 pp.<br>[−0.77, 0.21 pp.] </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>De facto enforcement</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;width: 34%; \"> A 0.1 unit decrease in the core civil society index (i.e. worse environment) </td>\n   <td style=\"text-align:left;width: 34%; \"> less contentious aid in the next year </td>\n   <td style=\"text-align:left;width: 14%; \">  <img src=\"sparkplots/contentiousness_bar_v2xcs_ccsi.png\">\n</td>\n   <td style=\"text-align:center;width: 18%; \"> −0.01 pp.<br>[−0.09, 0.05 pp.] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;width: 34%; \"> A 1 unit decrease in the civil society repression score (i.e. more repression) </td>\n   <td style=\"text-align:left;width: 34%; \"> less contentious aid in the next year </td>\n   <td style=\"text-align:left;width: 14%; \">  <img src=\"sparkplots/contentiousness_bar_v2csreprss.png\">\n</td>\n   <td style=\"text-align:center;width: 18%; \"> −0.16 pp.<br>[−0.31, −0.05 pp.] </td>\n  </tr>\n</tbody>\n<tfoot>\n<tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup>*</sup> The probability denotes the percentage of the posterior distribution that falls above or below 0.</td></tr>\n<tr><td style=\"padding: 0; \" colspan=\"100%\">\n<sup>†</sup> Reported values are the median posterior marginal effect of each treatment variable on the outcome, multiplied by 100 to show percentage point changes; 95% highest posterior density intervals (HPDI) shown in brackets.</td></tr>\n</tfoot>\n</table>\n\n`````\n:::\n:::\n\n\n### Within- and between-country variability (φ and σs)\n\n\n\n\n\nThe $\\phi$ and $\\sigma$ terms are roughly the same across all these different models, so we'll just show the results from the total barriers model here. We have three uncertainty-related terms to work with:\n\n- $\\phi_y$ (`phi`): the precision or variance of aid contentiousness within countries. On the log scale, it's 13.98, which is 1.174\\times 10^{6} when unlogged or exponentiated, which is incredibly precise. That gives us a posterior distribution of the non-zero-inflated part of the model of $\\operatorname{Beta}(0.069, 1.174\\times 10^{6})$ which looks like this, very narrowly focused around the baseline average 2000 proportion:\n\n\n  ::: {.cell layout-align=\"center\"}\n  \n  ```{.r .cell-code}\n  beta_params <- m_purpose_outcome_total$model %>% \n    tidy(parameters = c(\"b_(Intercept)\", \"phi\"))\n  \n  beta_mu <- beta_params %>% \n    filter(term == \"b_(Intercept)\") %>% \n    pull(estimate)\n  \n  beta_phi <- beta_params %>% \n    filter(term == \"phi\") %>% \n    pull(estimate)\n  \n  ggplot() +\n    stat_function(geom = \"area\", fill = clrs$Prism[7],\n                  fun = ~dprop(., mean = plogis(beta_mu), size = exp(beta_phi))) +\n    scale_x_continuous(labels = label_percent(), limits = c(0.067, 0.07)) +\n    labs(title = \"Distribution of non-zero-inflated contentious aid in 2000\",\n         subtitle = glue::glue(\"Beta(µ = plogis({round(beta_mu, 2)}), φ = exp({round(beta_phi, 2)})) or Beta(µ = {round(plogis(beta_mu), 3)}, φ = {round(exp(beta_phi), 0)})\")) +\n    theme_donors()\n  ```\n  \n  ::: {.cell-output-display}\n  ![](models_aid-contentiousness_files/figure-html/plot-zi-phi-1.png){fig-align='center' width=70%}\n  :::\n  :::\n\n\n- $\\sigma_0$ (`sd__(Intercept)` for the `gwcode` group): the variability between countries' baseline averages, or the variability around the $b_{0_j}$ offsets. Here it's 0.55, which means that across or between countries, the proportion of contentious aid varies by 0.5ish logit units.\n\n- $\\sigma_3$ (`sd__year_c` for the `gwcode` group): the variability between countries' year effects, or the variability around the $b_{3_j}$ offsets. Here it's 0.04, which means that average year effects vary by 0.04 logit units across or between countries.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\"}\nm_purpose_outcome_total$model %>% \n  tidy(parameters = c(\"sd_*\", \"phi\")) %>% \n  select(-component)\n## # A tibble: 3 × 5\n##   term                   estimate std.error conf.low conf.high\n##   <chr>                     <dbl>     <dbl>    <dbl>     <dbl>\n## 1 sd_gwcode__(Intercept)   0.549    0.0430    0.469     0.639 \n## 2 sd_gwcode__year_c        0.0391   0.00529   0.0294    0.0501\n## 3 phi                     14.0      0.412    13.2      14.8\n```\n:::\n\n\n\n### Full results table\n\nAgain, this is less important since we don't care about individual coefficients and instead care about conditional effects, but for the sake of full transparency (and to placate future reviewers), here's a table of all the results:\n\n\n::: {#tbl-h2-outcome .cell layout-align=\"center\" tbl-cap='Results from all outcome models'}\n\n```{.r .cell-code}\nmodels_tbl_h2_outcome_dejure <- models_tbl_h2_outcome_dejure %>% \n  set_names(1:length(.))\n\nnotes <- c(\n  \"Posterior medians; 95% credible intervals (HDPI) in brackets.\", \n  \"Total \\\\(R^2\\\\) considers the variance of both population and group effects;\", \n  \"marginal \\\\(R^2\\\\) only takes population effects into account\"\n)\n\nmodelsummary(models_tbl_h2_outcome_dejure,\n             estimate = \"{estimate}\",\n             statistic = \"[{conf.low}, {conf.high}]\",\n             add_rows = outcome_rows,\n             coef_map = coefs_outcome,\n             gof_map = gofs,\n             output = \"kableExtra\",\n             fmt =  list(estimate = 2, conf.low = 2, conf.high = 2)) %>% \n  row_spec(1, bold = TRUE) %>% \n  kable_styling(htmltable_class = \"table-sm light-border\") %>% \n  footnote(general = notes, footnote_as_chunk = TRUE)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-sm light-border\" style=\"width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;border-bottom: 0;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:center;\"> 1 </th>\n   <th style=\"text-align:center;\"> 2 </th>\n   <th style=\"text-align:center;\"> 3 </th>\n   <th style=\"text-align:center;\"> 4 </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;font-weight: bold;\"> Treatment </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Total barriers (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to advocacy (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to entry (t) </td>\n   <td style=\"text-align:center;font-weight: bold;\"> Barriers to funding (t) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Treatment (t − 1) </td>\n   <td style=\"text-align:center;\"> 0.004 </td>\n   <td style=\"text-align:center;\"> 0.08 </td>\n   <td style=\"text-align:center;\"> 0.05 </td>\n   <td style=\"text-align:center;\"> −0.05 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.04, 0.05] </td>\n   <td style=\"text-align:center;\"> [−0.07, 0.24] </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.13] </td>\n   <td style=\"text-align:center;\"> [−0.15, 0.04] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Treatment history </td>\n   <td style=\"text-align:center;\"> −0.006 </td>\n   <td style=\"text-align:center;\"> −0.01 </td>\n   <td style=\"text-align:center;\"> −0.01 </td>\n   <td style=\"text-align:center;\"> −0.01 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.01, −0.002] </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.001] </td>\n   <td style=\"text-align:center;\"> [−0.02, −0.001] </td>\n   <td style=\"text-align:center;\"> [−0.02, −0.0009] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Intercept </td>\n   <td style=\"text-align:center;\"> −2.61 </td>\n   <td style=\"text-align:center;\"> −2.66 </td>\n   <td style=\"text-align:center;\"> −2.59 </td>\n   <td style=\"text-align:center;\"> −2.61 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−2.72, −2.49] </td>\n   <td style=\"text-align:center;\"> [−2.77, −2.55] </td>\n   <td style=\"text-align:center;\"> [−2.71, −2.47] </td>\n   <td style=\"text-align:center;\"> [−2.72, −2.51] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Year </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.06, 0.09] </td>\n   <td style=\"text-align:center;\"> [0.06, 0.08] </td>\n   <td style=\"text-align:center;\"> [0.06, 0.08] </td>\n   <td style=\"text-align:center;\"> [0.06, 0.08] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Zero-inflated part: Year </td>\n   <td style=\"text-align:center;\"> −0.05 </td>\n   <td style=\"text-align:center;\"> −0.03 </td>\n   <td style=\"text-align:center;\"> −0.05 </td>\n   <td style=\"text-align:center;\"> −0.05 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.06, −0.03] </td>\n   <td style=\"text-align:center;\"> [−0.05, −0.02] </td>\n   <td style=\"text-align:center;\"> [−0.06, −0.03] </td>\n   <td style=\"text-align:center;\"> [−0.06, −0.03] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Zero-inflated part: Year² </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n   <td style=\"text-align:center;\"> 0.01 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.01, 0.02] </td>\n   <td style=\"text-align:center;\"> [0.01, 0.02] </td>\n   <td style=\"text-align:center;\"> [0.01, 0.02] </td>\n   <td style=\"text-align:center;\"> [0.01, 0.02] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Zero-inflated part: Intercept </td>\n   <td style=\"text-align:center;\"> −2.57 </td>\n   <td style=\"text-align:center;\"> −2.54 </td>\n   <td style=\"text-align:center;\"> −2.50 </td>\n   <td style=\"text-align:center;\"> −2.58 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−2.75, −2.40] </td>\n   <td style=\"text-align:center;\"> [−2.72, −2.36] </td>\n   <td style=\"text-align:center;\"> [−2.69, −2.32] </td>\n   <td style=\"text-align:center;\"> [−2.76, −2.41] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Between-country intercept variability (\\(\\sigma_0\\) for \\(b_0\\) offsets) </td>\n   <td style=\"text-align:center;\"> 0.55 </td>\n   <td style=\"text-align:center;\"> 0.55 </td>\n   <td style=\"text-align:center;\"> 0.52 </td>\n   <td style=\"text-align:center;\"> 0.53 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.47, 0.64] </td>\n   <td style=\"text-align:center;\"> [0.47, 0.64] </td>\n   <td style=\"text-align:center;\"> [0.45, 0.61] </td>\n   <td style=\"text-align:center;\"> [0.45, 0.62] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Between-country year variability (\\(\\sigma_3\\) for \\(b_3\\) offsets) </td>\n   <td style=\"text-align:center;\"> 0.04 </td>\n   <td style=\"text-align:center;\"> 0.03 </td>\n   <td style=\"text-align:center;\"> 0.04 </td>\n   <td style=\"text-align:center;\"> 0.04 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [0.03, 0.05] </td>\n   <td style=\"text-align:center;\"> [0.03, 0.04] </td>\n   <td style=\"text-align:center;\"> [0.03, 0.05] </td>\n   <td style=\"text-align:center;\"> [0.03, 0.05] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Correlation between random intercepts and slopes (\\(\\rho\\)) </td>\n   <td style=\"text-align:center;\"> 0.15 </td>\n   <td style=\"text-align:center;\"> 0.19 </td>\n   <td style=\"text-align:center;\"> 0.22 </td>\n   <td style=\"text-align:center;\"> 0.14 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> [−0.11, 0.39] </td>\n   <td style=\"text-align:center;\"> [−0.09, 0.45] </td>\n   <td style=\"text-align:center;\"> [−0.03, 0.45] </td>\n   <td style=\"text-align:center;\"> [−0.12, 0.38] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Model dispersion (\\(\\phi_y\\)) </td>\n   <td style=\"text-align:center;\"> 13.97 </td>\n   <td style=\"text-align:center;\"> 13.79 </td>\n   <td style=\"text-align:center;\"> 12.36 </td>\n   <td style=\"text-align:center;\"> 13.58 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;box-shadow: 0px 1px\">  </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [13.18, 14.79] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [12.92, 14.70] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [11.59, 13.16] </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> [12.79, 14.39] </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:center;\"> 3151 </td>\n   <td style=\"text-align:center;\"> 3151 </td>\n   <td style=\"text-align:center;\"> 3151 </td>\n   <td style=\"text-align:center;\"> 3151 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> \\(R^2\\) (total) </td>\n   <td style=\"text-align:center;\"> 0.30 </td>\n   <td style=\"text-align:center;\"> 0.26 </td>\n   <td style=\"text-align:center;\"> 0.30 </td>\n   <td style=\"text-align:center;\"> 0.30 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> \\(R^2\\) (marginal) </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n   <td style=\"text-align:center;\"> 0.05 </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n   <td style=\"text-align:center;\"> 0.07 </td>\n  </tr>\n</tbody>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<span style=\"font-style: italic;\">Note: </span> <sup></sup> Posterior medians; 95% credible intervals (HDPI) in brackets. <sup></sup> Total \\(R^2\\) considers the variance of both population and group effects; <sup></sup> marginal \\(R^2\\) only takes population effects into account</td></tr></tfoot>\n</table>\n\n`````\n:::\n:::\n",
    "supporting": [
      "models_aid-contentiousness_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}