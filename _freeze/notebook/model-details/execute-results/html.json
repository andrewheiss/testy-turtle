{
  "hash": "e98cbbf85e4dd0bfd856b830870feabd",
  "result": {
    "markdown": "---\ntitle: \"Model details\"\nauthor: \"Suparna Chaudhry and Andrew Heiss\"\ndate-modified: \"2023-01-23\"\n---\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(targets)\nlibrary(brms)\nlibrary(glue)\nlibrary(kableExtra)\nlibrary(lubridate)\nlibrary(here)\n\n# Treatment models\ntar_load(c(m_oda_treatment_total, m_oda_treatment_advocacy, \n           m_oda_treatment_entry, m_oda_treatment_funding, \n           m_oda_treatment_ccsi, m_oda_treatment_repress))\ntar_load(c(m_purpose_treatment_total, m_purpose_treatment_advocacy,\n           m_purpose_treatment_entry, m_purpose_treatment_funding,\n           m_purpose_treatment_ccsi, m_purpose_treatment_repress))\ntar_load(c(m_recip_treatment_total_dom, m_recip_treatment_advocacy_dom,\n           m_recip_treatment_entry_dom, m_recip_treatment_funding_dom,\n           m_recip_treatment_ccsi_dom, m_recip_treatment_repress_dom))\ntar_load(c(m_recip_treatment_total_foreign, m_recip_treatment_advocacy_foreign,\n           m_recip_treatment_entry_foreign, m_recip_treatment_funding_foreign,\n           m_recip_treatment_ccsi_foreign, m_recip_treatment_repress_foreign))\n\n# Outcome models\ntar_load(c(m_oda_outcome_total, m_oda_outcome_advocacy, \n           m_oda_outcome_entry, m_oda_outcome_funding,\n           m_oda_outcome_ccsi, m_oda_outcome_repress))\ntar_load(c(m_purpose_outcome_total, m_purpose_outcome_advocacy,\n           m_purpose_outcome_entry, m_purpose_outcome_funding,\n           m_purpose_outcome_ccsi, m_purpose_outcome_repress))\ntar_load(c(m_recip_outcome_total_dom, m_recip_outcome_advocacy_dom,\n           m_recip_outcome_entry_dom, m_recip_outcome_funding_dom,\n           m_recip_outcome_ccsi_dom, m_recip_outcome_repress_dom))\ntar_load(c(m_recip_outcome_total_foreign, m_recip_outcome_advocacy_foreign,\n           m_recip_outcome_entry_foreign, m_recip_outcome_funding_foreign,\n           m_recip_outcome_ccsi_foreign, m_recip_outcome_repress_foreign))\n```\n:::\n\n\n\n\n\n\n\n\n\n\n\n\nWe ran these models on a 2021 M1 MacBook Pro with 32 GB of RAM, with 4 MCMC chains spread across 8 cores, with two CPU threads per chain, using Stan through brms through cmdstanr. \n\nIn total, it took 7 hours, 31 minutes, and 44 seconds to run everything.\n\n# Model run times\n\n## Models for H~1~ (total ODA)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmodel_df_h1 <- tribble(\n  ~model, ~slot, ~treatment_var, ~stage, ~details,\n  \"m_oda_treatment_total\", \"model_num\", \"Total barriers\", \"Treatment\", \"Numerator\",\n  \"m_oda_treatment_total\", \"model_denom\", \"Total barriers\", \"Treatment\", \"Denominator\",\n  \"m_oda_outcome_total\", \"model\", \"Total barriers\", \"Outcome\", \"\",\n  \n  \"m_oda_treatment_advocacy\", \"model_num\", \"Barriers to advocacy\", \"Treatment\", \"Numerator\",\n  \"m_oda_treatment_advocacy\", \"model_denom\", \"Barriers to advocacy\", \"Treatment\", \"Denominator\",\n  \"m_oda_outcome_advocacy\", \"model\", \"Barriers to advocacy\", \"Outcome\", \"\",\n  \n  \"m_oda_treatment_entry\", \"model_num\", \"Barriers to entry\", \"Treatment\", \"Numerator\",\n  \"m_oda_treatment_entry\", \"model_denom\", \"Barriers to entry\", \"Treatment\", \"Denominator\",\n  \"m_oda_outcome_entry\", \"model\", \"Barriers to entry\", \"Outcome\", \"\",\n  \n  \"m_oda_treatment_funding\", \"model_num\", \"Barriers to funding\", \"Treatment\", \"Numerator\",\n  \"m_oda_treatment_funding\", \"model_denom\", \"Barriers to funding\", \"Treatment\", \"Denominator\",\n  \"m_oda_outcome_funding\", \"model\", \"Barriers to funding\", \"Outcome\", \"\",\n  \n  \"m_oda_treatment_ccsi\", \"model_num\", \"Civil society index\", \"Treatment\", \"Numerator\",\n  \"m_oda_treatment_ccsi\", \"model_denom\", \"Civil society index\", \"Treatment\", \"Denominator\",\n  \"m_oda_outcome_ccsi\", \"model_50\", \"Civil society index\", \"Outcome\", \"IPTW truncated at 50\",\n  \"m_oda_outcome_ccsi\", \"model_500\", \"Civil society index\", \"Outcome\", \"IPTW truncated at 500\",\n  \n  \"m_oda_treatment_repress\", \"model_num\", \"Civil society repression\", \"Treatment\", \"Numerator\",\n  \"m_oda_treatment_repress\", \"model_denom\", \"Civil society repression\", \"Treatment\", \"Denominator\",\n  \"m_oda_outcome_repress\", \"model_50\", \"Civil society repression\", \"Outcome\", \"IPTW truncated at 50\"\n) %>% \n  mutate(model_nice = glue(\"<code>{model}${slot}</code>\"))\n\nmodels_h1 <- model_df_h1 %>% \n  mutate(actual_model = map2(model, slot, ~eval(rlang::sym(.x))[[.y]])) %>% \n  mutate(across(c(treatment_var, stage, details), ~fct_inorder(., ordered = TRUE))) %>% \n  mutate(duration = map(actual_model, ~rstan::get_elapsed_time(.$fit)),\n         duration = map(duration, ~rownames_to_column(as_tibble(.)))) %>% \n  select(-actual_model) %>% \n  unnest(duration) %>% \n  group_by(Model = model_nice, Treatment = treatment_var, \n           Stage = stage, Details = details) %>% \n  summarize(`Total time (i.e. longest chain)` = as.duration(max(warmup + sample))) %>%\n  ungroup() %>% \n  arrange(Treatment, Stage, Details)\n\ntotal_row_h1 <- tibble(Treatment = \"Total\", \n                       `Total time (i.e. longest chain)` =\n                         as.duration(sum(models_h1$`Total time (i.e. longest chain)`)))\n\nmodel_time_h1 <- models_h1 %>% \n  bind_rows(total_row_h1)\n\nmodel_time_h1 %>% \n  select(-Treatment) %>% \n  rename(` ` = Model) %>% \n  kbl(escape = FALSE) %>% \n  pack_rows(index = table(fct_inorder(model_time_h1$Treatment))) %>% \n  kable_styling(htmltable_class = \"table table-sm\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" table table-sm\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:left;\"> Stage </th>\n   <th style=\"text-align:left;\"> Details </th>\n   <th style=\"text-align:right;\"> Total time (i.e. longest chain) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Total barriers</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_total$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 16.4s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_total$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 33.415s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_outcome_total$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 374.079s (~6.23 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to advocacy</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_advocacy$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 19.293s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_advocacy$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 35.066s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_outcome_advocacy$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 178.668s (~2.98 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to entry</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_entry$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 20.572s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_entry$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 47.97s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_outcome_entry$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 190.837s (~3.18 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to funding</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_funding$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 19.4s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_funding$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 34.861s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_outcome_funding$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 187.082s (~3.12 minutes) </td>\n  </tr>\n  <tr grouplength=\"4\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Civil society index</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_ccsi$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 38.434s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_ccsi$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 115.156s (~1.92 minutes) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_outcome_ccsi$model_50</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\"> IPTW truncated at 50 </td>\n   <td style=\"text-align:right;\"> 1001.767s (~16.7 minutes) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_outcome_ccsi$model_500</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\"> IPTW truncated at 500 </td>\n   <td style=\"text-align:right;\"> 3729.708s (~1.04 hours) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Civil society repression</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_repress$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 35.689s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_treatment_repress$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 124.632s (~2.08 minutes) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_oda_outcome_repress$model_50</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\"> IPTW truncated at 50 </td>\n   <td style=\"text-align:right;\"> 1407.371s (~23.46 minutes) </td>\n  </tr>\n  <tr grouplength=\"1\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Total</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 7610.4s (~2.11 hours) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Models for H~2~ (aid contentiousness)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmodel_df_h2 <- tribble(\n  ~model, ~slot, ~treatment_var, ~stage, ~details,\n  \"m_purpose_treatment_total\", \"model_num\", \"Total barriers\", \"Treatment\", \"Numerator\",\n  \"m_purpose_treatment_total\", \"model_denom\", \"Total barriers\", \"Treatment\", \"Denominator\",\n  \"m_purpose_outcome_total\", \"model\", \"Total barriers\", \"Outcome\", \"\",\n  \n  \"m_purpose_treatment_advocacy\", \"model_num\", \"Barriers to advocacy\", \"Treatment\", \"Numerator\",\n  \"m_purpose_treatment_advocacy\", \"model_denom\", \"Barriers to advocacy\", \"Treatment\", \"Denominator\",\n  \"m_purpose_outcome_advocacy\", \"model\", \"Barriers to advocacy\", \"Outcome\", \"\",\n  \n  \"m_purpose_treatment_entry\", \"model_num\", \"Barriers to entry\", \"Treatment\", \"Numerator\",\n  \"m_purpose_treatment_entry\", \"model_denom\", \"Barriers to entry\", \"Treatment\", \"Denominator\",\n  \"m_purpose_outcome_entry\", \"model\", \"Barriers to entry\", \"Outcome\", \"\",\n  \n  \"m_purpose_treatment_funding\", \"model_num\", \"Barriers to funding\", \"Treatment\", \"Numerator\",\n  \"m_purpose_treatment_funding\", \"model_denom\", \"Barriers to funding\", \"Treatment\", \"Denominator\",\n  \"m_purpose_outcome_funding\", \"model\", \"Barriers to funding\", \"Outcome\", \"\",\n  \n  \"m_purpose_treatment_ccsi\", \"model_num\", \"Civil society index\", \"Treatment\", \"Numerator\",\n  \"m_purpose_treatment_ccsi\", \"model_denom\", \"Civil society index\", \"Treatment\", \"Denominator\",\n  \"m_purpose_outcome_ccsi\", \"model_50\", \"Civil society index\", \"Outcome\", \"IPTW truncated at 50\",\n  \n  \"m_purpose_treatment_repress\", \"model_num\", \"Civil society repression\", \"Treatment\", \"Numerator\",\n  \"m_purpose_treatment_repress\", \"model_denom\", \"Civil society repression\", \"Treatment\", \"Denominator\",\n  \"m_purpose_outcome_repress\", \"model_50\", \"Civil society repression\", \"Outcome\", \"IPTW truncated at 50\"\n) %>% \n  mutate(model_nice = glue(\"<code>{model}${slot}</code>\"))\n\nmodels_h2 <- model_df_h2 %>% \n  mutate(actual_model = map2(model, slot, ~eval(rlang::sym(.x))[[.y]])) %>% \n  mutate(across(c(treatment_var, stage, details), ~fct_inorder(., ordered = TRUE))) %>% \n  mutate(duration = map(actual_model, ~rstan::get_elapsed_time(.$fit)),\n         duration = map(duration, ~rownames_to_column(as_tibble(.)))) %>% \n  select(-actual_model) %>% \n  unnest(duration) %>% \n  group_by(Model = model_nice, Treatment = treatment_var, \n           Stage = stage, Details = details) %>% \n  summarize(`Total time (i.e. longest chain)` = as.duration(max(warmup + sample))) %>%\n  ungroup() %>% \n  arrange(Treatment, Stage, Details)\n\ntotal_row_h2 <- tibble(Treatment = \"Total\", \n                       `Total time (i.e. longest chain)` =\n                         as.duration(sum(models_h2$`Total time (i.e. longest chain)`)))\n\nmodel_time_h2 <- models_h2 %>% \n  bind_rows(total_row_h2)\n\nmodel_time_h2 %>% \n  select(-Treatment) %>% \n  rename(` ` = Model) %>% \n  kbl(escape = FALSE) %>% \n  pack_rows(index = table(fct_inorder(model_time_h2$Treatment))) %>% \n  kable_styling(htmltable_class = \"table table-sm\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" table table-sm\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:left;\"> Stage </th>\n   <th style=\"text-align:left;\"> Details </th>\n   <th style=\"text-align:right;\"> Total time (i.e. longest chain) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Total barriers</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_total$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 19.225s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_total$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 52.748s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_outcome_total$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 327.009s (~5.45 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to advocacy</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_advocacy$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 22.654s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_advocacy$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 37.543s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_outcome_advocacy$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 249.26s (~4.15 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to entry</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_entry$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 20.675s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_entry$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 46.79s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_outcome_entry$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 274.818s (~4.58 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to funding</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_funding$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 19.561s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_funding$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 51.126s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_outcome_funding$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 316.45s (~5.27 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Civil society index</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_ccsi$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 47.483s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_ccsi$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 128.473s (~2.14 minutes) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_outcome_ccsi$model_50</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\"> IPTW truncated at 50 </td>\n   <td style=\"text-align:right;\"> 4402.096s (~1.22 hours) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Civil society repression</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_repress$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 36.594s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_treatment_repress$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 71.595s (~1.19 minutes) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_purpose_outcome_repress$model_50</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\"> IPTW truncated at 50 </td>\n   <td style=\"text-align:right;\"> 4841.638s (~1.34 hours) </td>\n  </tr>\n  <tr grouplength=\"1\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Total</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 10965.738s (~3.05 hours) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Models for H~3~ (aid recipients)\n\n### Domestic NGOs\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n### Foreign NGOs\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmodel_df_h3_foreign <- tribble(\n  ~model, ~slot, ~treatment_var, ~stage, ~details,\n  \"m_recip_treatment_total_foreign\", \"model_num\", \"Total barriers\", \"Treatment\", \"Numerator\",\n  \"m_recip_treatment_total_foreign\", \"model_denom\", \"Total barriers\", \"Treatment\", \"Denominator\",\n  \"m_recip_outcome_total_foreign\", \"model\", \"Total barriers\", \"Outcome\", \"\",\n  \n  \"m_recip_treatment_advocacy_foreign\", \"model_num\", \"Barriers to advocacy\", \"Treatment\", \"Numerator\",\n  \"m_recip_treatment_advocacy_foreign\", \"model_denom\", \"Barriers to advocacy\", \"Treatment\", \"Denominator\",\n  \"m_recip_outcome_advocacy_foreign\", \"model\", \"Barriers to advocacy\", \"Outcome\", \"\",\n  \n  \"m_recip_treatment_entry_foreign\", \"model_num\", \"Barriers to entry\", \"Treatment\", \"Numerator\",\n  \"m_recip_treatment_entry_foreign\", \"model_denom\", \"Barriers to entry\", \"Treatment\", \"Denominator\",\n  \"m_recip_outcome_entry_foreign\", \"model\", \"Barriers to entry\", \"Outcome\", \"\",\n  \n  \"m_recip_treatment_funding_foreign\", \"model_num\", \"Barriers to funding\", \"Treatment\", \"Numerator\",\n  \"m_recip_treatment_funding_foreign\", \"model_denom\", \"Barriers to funding\", \"Treatment\", \"Denominator\",\n  \"m_recip_outcome_funding_foreign\", \"model\", \"Barriers to funding\", \"Outcome\", \"\",\n  \n  \"m_recip_treatment_ccsi_foreign\", \"model_num\", \"Civil society index\", \"Treatment\", \"Numerator\",\n  \"m_recip_treatment_ccsi_foreign\", \"model_denom\", \"Civil society index\", \"Treatment\", \"Denominator\",\n  \"m_recip_outcome_ccsi_foreign\", \"model_50\", \"Civil society index\", \"Outcome\", \"IPTW truncated at 50\",\n  \n  \"m_recip_treatment_repress_foreign\", \"model_num\", \"Civil society repression\", \"Treatment\", \"Numerator\",\n  \"m_recip_treatment_repress_foreign\", \"model_denom\", \"Civil society repression\", \"Treatment\", \"Denominator\",\n  \"m_recip_outcome_repress_foreign\", \"model_50\", \"Civil society repression\", \"Outcome\", \"IPTW truncated at 50\"\n) %>% \n  mutate(model_nice = glue(\"<code>{model}${slot}</code>\"))\n\nmodels_h3_foreign <- model_df_h3_foreign %>% \n  mutate(actual_model = map2(model, slot, ~eval(rlang::sym(.x))[[.y]])) %>% \n  mutate(across(c(treatment_var, stage, details), ~fct_inorder(., ordered = TRUE))) %>% \n  mutate(duration = map(actual_model, ~rstan::get_elapsed_time(.$fit)),\n         duration = map(duration, ~rownames_to_column(as_tibble(.)))) %>% \n  select(-actual_model) %>% \n  unnest(duration) %>% \n  group_by(Model = model_nice, Treatment = treatment_var, \n           Stage = stage, Details = details) %>% \n  summarize(`Total time (i.e. longest chain)` = as.duration(max(warmup + sample))) %>%\n  ungroup() %>% \n  arrange(Treatment, Stage, Details)\n\ntotal_row_h3_foreign <- tibble(Treatment = \"Total\", \n                               `Total time (i.e. longest chain)` =\n                                 as.duration(sum(models_h3_foreign$`Total time (i.e. longest chain)`)))\n\nmodel_time_h3_foreign <- models_h3_foreign %>% \n  bind_rows(total_row_h3_foreign)\n\nmodel_time_h3_foreign %>% \n  select(-Treatment) %>% \n  rename(` ` = Model) %>% \n  kbl(escape = FALSE) %>% \n  pack_rows(index = table(fct_inorder(model_time_h3_foreign$Treatment))) %>% \n  kable_styling(htmltable_class = \"table table-sm\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" table table-sm\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:left;\"> Stage </th>\n   <th style=\"text-align:left;\"> Details </th>\n   <th style=\"text-align:right;\"> Total time (i.e. longest chain) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Total barriers</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_total_foreign$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 17.044s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_total_foreign$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 26.729s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_outcome_total_foreign$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 195.911s (~3.27 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to advocacy</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_advocacy_foreign$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 18.193s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_advocacy_foreign$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 51.664s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_outcome_advocacy_foreign$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 269.6s (~4.49 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to entry</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_entry_foreign$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 20.009s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_entry_foreign$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 41.128s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_outcome_entry_foreign$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 211.453s (~3.52 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Barriers to funding</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_funding_foreign$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 14.917s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_funding_foreign$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 42.38s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_outcome_funding_foreign$model</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 221.329s (~3.69 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Civil society index</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_ccsi_foreign$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 26.768s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_ccsi_foreign$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 132.467s (~2.21 minutes) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_outcome_ccsi_foreign$model_50</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\"> IPTW truncated at 50 </td>\n   <td style=\"text-align:right;\"> 1253.969s (~20.9 minutes) </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Civil society repression</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_repress_foreign$model_num</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Numerator </td>\n   <td style=\"text-align:right;\"> 29.38s </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_treatment_repress_foreign$model_denom</code> </td>\n   <td style=\"text-align:left;\"> Treatment </td>\n   <td style=\"text-align:left;\"> Denominator </td>\n   <td style=\"text-align:right;\"> 103.338s (~1.72 minutes) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> <code>m_recip_outcome_repress_foreign$model_50</code> </td>\n   <td style=\"text-align:left;\"> Outcome </td>\n   <td style=\"text-align:left;\"> IPTW truncated at 50 </td>\n   <td style=\"text-align:right;\"> 2283.222s (~38.05 minutes) </td>\n  </tr>\n  <tr grouplength=\"1\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Total</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\"> 4959.501s (~1.38 hours) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}